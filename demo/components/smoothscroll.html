<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>SmoothScroll Component - Battersea Library</title>
		<meta name="description" content="Smooth scroll-to-section navigation with visual dot indicators - Battersea Library Component">

		<!-- LESS Stylesheets -->
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-library.less">
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-demo-site.less">

		<!-- LESS.js Configuration & Compiler -->
		<script>
			less = {
				env: 'development',
				async: false,
				fileAsync: false,
				poll: 1000,
				logLevel: 2,
				globalVars: {
					'primary-color': '#667eea',
					'secondary-color': '#764ba2',
					'accent-color': '#4ecdc4'
				}
			};
		</script>
		<script src="https://cdn.jsdelivr.net/npm/less@4.2.0"></script>

		<!-- Environment Configuration (must load before includes) -->
		<script src="../../src/js/battersea-env-config.js"></script>

		<style>
			@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
		</style>
	</head>
	<body>
		<div id="site-background" class="site-background-image"></div>

		<!-- PreHeader Include (GTM, etc) -->
		<div id="demo-preheader-placeholder" class="battersea-header-pre"></div>

		<!-- Header Component with Navigation -->
		<header id="mainHeader" class="battersea-header"
			data-header
			data-sticky="true"
			data-shrink="true"
			data-shrink-offset="100"
			data-shrink-height="60"
			data-layout="right-align"
			data-transition-speed="0.3"></header>

		<div class="content-outer">

			<!-- Breadcrumb -->
			<div data-breadcrumb></div>

			<!-- ============================================ -->
			<!-- HERO SECTION -->
			<!-- ============================================ -->
			<section class="hero-section" data-scroll-section data-scroll-title="Introduction" data-animate="fade-up">
				<div class="section-box">
					<div class="hero-content">
						<h1>SmoothScroll Component</h1>
						<p class="hero-subtitle">Smooth scroll-to-section navigation with visual dot indicators and tooltip labels</p>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- LIVE DEMO SECTION -->
			<!-- ============================================ -->
			<section id="demos" class="showcase-section" data-scroll-section data-scroll-title="Live Demo" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">It's Already Running</h2>
						<p class="section-subtitle">The SmoothScroll component is active on this very page</p>

						<div class="demo-subsection" data-animate="fade-up">
							<h3>Look to the right</h3>
							<p>See those small dots running down the right-hand side of the page? That's the SmoothScroll component in action. Each dot represents one of the sections on this page. Try clicking a dot &mdash; you'll be scrolled smoothly to that section. Hover over a dot and you'll see a tooltip with the section name.</p>

							<div class="demo-container" style="text-align: left;">
								<p>Here's what's happening under the bonnet:</p>
								<ol style="line-height: 2; padding-left: 1.5rem;">
									<li>The component scans the page for every element with a <code>data-scroll-section</code> attribute</li>
									<li>It reads each section's <code>data-scroll-title</code> to create labelled navigation dots</li>
									<li>An <code>IntersectionObserver</code> watches which section is currently in view and highlights the matching dot</li>
									<li>Clicking a dot triggers a smooth animated scroll to that section, accounting for the sticky header height</li>
									<li>Tooltips on each dot are powered by the Tooltip component &mdash; so they inherit all the same positioning and styling</li>
								</ol>
							</div>
						</div>

						<div class="demo-subsection delay-1" data-animate="fade-up">
							<h3>How sections are defined</h3>
							<p>Every section on this page follows the same pattern. Here's what the markup looks like:</p>

							<div class="demo-container" style="text-align: left;">
<pre><code>&lt;section data-scroll-section data-scroll-title="Introduction"&gt;
  &lt;!-- Section content here --&gt;
&lt;/section&gt;

&lt;section data-scroll-section data-scroll-title="Live Demo"&gt;
  &lt;!-- Section content here --&gt;
&lt;/section&gt;

&lt;section data-scroll-section data-scroll-title="Features"&gt;
  &lt;!-- Section content here --&gt;
&lt;/section&gt;</code></pre>
								<p style="margin-top: 1rem;">That's all you need on the sections themselves. The component does the rest &mdash; generating IDs where needed, creating the dots, and wiring up the scroll behaviour.</p>
							</div>
						</div>

						<div class="demo-subsection delay-2" data-animate="fade-up">
							<h3>The SmoothScroll container</h3>
							<p>The component is initialised by a single <code>div</code> with data attributes. On this page, it sits just before the closing <code>&lt;/body&gt;</code> tag:</p>

							<div class="demo-container" style="text-align: left;">
<pre><code>&lt;div data-smoothscroll
     data-smoothscroll-header-selector="#mainHeader"
     data-smoothscroll-position="right"
     data-smoothscroll-duration="800"
     data-smoothscroll-easing="ease-out"
     data-smoothscroll-hide-mobile="true"&gt;
&lt;/div&gt;</code></pre>
								<p style="margin-top: 1rem;">The container itself is invisible &mdash; it just tells the component where to look for a header (for offset calculations), which side to place the dots on, and how the scroll animation should feel.</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- FEATURES SECTION -->
			<!-- ============================================ -->
			<section id="features" class="features-section" data-scroll-section data-scroll-title="Features" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Key Features</h2>

						<div class="features-grid">
							<div class="feature-card delay-1" data-animate="fade-up">
								<div class="feature-icon">IO</div>
								<h3>IntersectionObserver Tracking</h3>
								<p>Uses the IntersectionObserver API to detect which section is in view. No scroll event polling &mdash; just efficient, browser-native observation.</p>
							</div>

							<div class="feature-card delay-2" data-animate="fade-up">
								<div class="feature-icon">~</div>
								<h3>Smooth Easing</h3>
								<p>Four easing functions built in &mdash; linear, ease-in, ease-out, and ease-in-out. Each uses cubic curves for a natural feel.</p>
							</div>

							<div class="feature-card delay-3" data-animate="fade-up">
								<div class="feature-icon">H</div>
								<h3>Dynamic Header Compensation</h3>
								<p>Recalculates the header height on every animation frame. Even if the header shrinks mid-scroll, you'll land in exactly the right spot.</p>
							</div>

							<div class="feature-card delay-4" data-animate="fade-up">
								<div class="feature-icon">&#10148;</div>
								<h3>Auto Dot Creation</h3>
								<p>Dots are generated automatically from your section markup. Add a new <code>data-scroll-section</code> and a new dot appears &mdash; no extra configuration needed.</p>
							</div>

							<div class="feature-card delay-5" data-animate="fade-up">
								<div class="feature-icon">Tab</div>
								<h3>Keyboard Navigation</h3>
								<p>Arrow keys move focus between dots. Enter or Space scrolls to the focused section. Fully accessible for keyboard-only users.</p>
							</div>

							<div class="feature-card delay-6" data-animate="fade-up">
								<div class="feature-icon">{ }</div>
								<h3>Custom Events</h3>
								<p>Dispatches <code>battersea:scrollSectionChange</code> whenever the active section changes &mdash; whether from clicking a dot or scrolling naturally.</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- CONFIGURATION SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Configuration" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Configuration &amp; Options</h2>

						<div class="config-content">
							<h3>Container Data Attributes</h3>
							<p>Configure the SmoothScroll component using these data attributes on the container element:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Values</th>
										<th>Default</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-smoothscroll</code></td>
										<td>-</td>
										<td>required</td>
										<td>Initialises the SmoothScroll component on the container element</td>
									</tr>
									<tr>
										<td><code>data-smoothscroll-offset</code></td>
										<td>number (px)</td>
										<td><code>0</code></td>
										<td>Static offset in pixels from the top of the viewport. Ignored if a header selector is provided</td>
									</tr>
									<tr>
										<td><code>data-smoothscroll-header-selector</code></td>
										<td>CSS selector</td>
										<td>-</td>
										<td>Selector for a sticky header element. The component dynamically reads its height for offset calculations</td>
									</tr>
									<tr>
										<td><code>data-smoothscroll-position</code></td>
										<td><code>left</code> / <code>right</code></td>
										<td><code>right</code></td>
										<td>Which side of the viewport the navigation dots appear on</td>
									</tr>
									<tr>
										<td><code>data-smoothscroll-duration</code></td>
										<td>number (ms)</td>
										<td><code>800</code></td>
										<td>Duration of the scroll animation in milliseconds</td>
									</tr>
									<tr>
										<td><code>data-smoothscroll-easing</code></td>
										<td><code>linear</code> / <code>ease-in</code> / <code>ease-out</code> / <code>ease-in-out</code></td>
										<td><code>ease-in-out</code></td>
										<td>Easing function applied to the scroll animation</td>
									</tr>
									<tr>
										<td><code>data-smoothscroll-hide-mobile</code></td>
										<td><code>true</code> / <code>false</code></td>
										<td><code>true</code></td>
										<td>Whether to hide the navigation dots on mobile screens</td>
									</tr>
								</tbody>
							</table>

							<h3 style="margin-top: 2rem;">Section Data Attributes</h3>
							<p>Each scrollable section needs these attributes:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Values</th>
										<th>Default</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-scroll-section</code></td>
										<td>-</td>
										<td>required</td>
										<td>Marks the element as a scrollable section. The component will create a dot for it</td>
									</tr>
									<tr>
										<td><code>data-scroll-title</code></td>
										<td>string</td>
										<td>required</td>
										<td>The label shown in the tooltip when hovering over the dot</td>
									</tr>
								</tbody>
							</table>

							<h3 style="margin-top: 2rem;">Dependencies</h3>
							<p>The SmoothScroll component requires <code>battersea-tooltip.js</code> for the dot tooltips. Make sure both scripts are included:</p>

<pre><code>&lt;script src="battersea-utils.js"&gt;&lt;/script&gt;
&lt;script src="battersea-core.js"&gt;&lt;/script&gt;
&lt;script src="battersea-tooltip.js"&gt;&lt;/script&gt;
&lt;script src="battersea-smoothscroll.js"&gt;&lt;/script&gt;</code></pre>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- USAGE EXAMPLES SECTION -->
			<!-- ============================================ -->
			<section class="faq-section" data-scroll-section data-scroll-title="Usage Examples" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Usage Examples</h2>

						<div data-accordion data-accordion-multiple="true">
							<div data-accordion-item class="active">
								<div data-accordion-header>Basic Setup</div>
								<div data-accordion-content>
									<div>
										<p>The simplest configuration &mdash; dots on the right, smooth scroll with a fixed offset:</p>
<pre><code>&lt;!-- Sections in your page --&gt;
&lt;section data-scroll-section data-scroll-title="Home"&gt;
  &lt;h1&gt;Welcome&lt;/h1&gt;
&lt;/section&gt;

&lt;section data-scroll-section data-scroll-title="About"&gt;
  &lt;h2&gt;About Us&lt;/h2&gt;
&lt;/section&gt;

&lt;section data-scroll-section data-scroll-title="Contact"&gt;
  &lt;h2&gt;Get in Touch&lt;/h2&gt;
&lt;/section&gt;

&lt;!-- SmoothScroll container --&gt;
&lt;div data-smoothscroll
     data-smoothscroll-offset="80"
     data-smoothscroll-position="right"&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>With a Sticky Header</div>
								<div data-accordion-content>
									<div>
										<p>If you've got a sticky header that changes height (like the Battersea Header component with shrink-on-scroll), use the header selector instead of a fixed offset. The component will measure the header's height dynamically:</p>
<pre><code>&lt;header id="mainHeader" class="battersea-header"
  data-header data-sticky="true" data-shrink="true"&gt;
  &lt;!-- header content --&gt;
&lt;/header&gt;

&lt;!-- SmoothScroll with dynamic header detection --&gt;
&lt;div data-smoothscroll
     data-smoothscroll-header-selector="#mainHeader"
     data-smoothscroll-duration="600"
     data-smoothscroll-easing="ease-out"&gt;
&lt;/div&gt;</code></pre>
										<p>This is the approach used on this demo page. The header starts at full height and shrinks as you scroll &mdash; and the SmoothScroll component adjusts on every frame.</p>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Left-Side Dots</div>
								<div data-accordion-content>
									<div>
										<p>Place the navigation dots on the left side of the viewport:</p>
<pre><code>&lt;div data-smoothscroll
     data-smoothscroll-position="left"
     data-smoothscroll-hide-mobile="true"&gt;
&lt;/div&gt;</code></pre>
										<p>The tooltips will automatically appear on the right side of the dots when positioned on the left, and vice versa.</p>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Listening to Section Changes</div>
								<div data-accordion-content>
									<div>
										<p>React to section changes in your own code:</p>
<pre><code>const scrollNav = document.querySelector('[data-smoothscroll]');

scrollNav.addEventListener('battersea:scrollSectionChange', (e) =&gt; {
  console.log('Active section:', e.detail.section.title);
  console.log('Section index:', e.detail.index);

  // Update a breadcrumb, analytics, or any other UI
  document.querySelector('.current-section').textContent =
    e.detail.section.title;
});</code></pre>
										<p>This event fires both when clicking a dot and when the user scrolls naturally past a section boundary.</p>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Different Easing Functions</div>
								<div data-accordion-content>
									<div>
										<p>Choose the easing that suits your project's feel:</p>
<pre><code>&lt;!-- Constant speed, no acceleration --&gt;
&lt;div data-smoothscroll data-smoothscroll-easing="linear"&gt;&lt;/div&gt;

&lt;!-- Starts slow, accelerates --&gt;
&lt;div data-smoothscroll data-smoothscroll-easing="ease-in"&gt;&lt;/div&gt;

&lt;!-- Starts fast, decelerates (this page uses this one) --&gt;
&lt;div data-smoothscroll data-smoothscroll-easing="ease-out"&gt;&lt;/div&gt;

&lt;!-- Starts slow, speeds up, then slows down --&gt;
&lt;div data-smoothscroll data-smoothscroll-easing="ease-in-out"&gt;&lt;/div&gt;</code></pre>
										<p>All four use cubic curves under the hood for a smooth, natural motion.</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- BROWSER SUPPORT SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Browser Support" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Browser Support</h2>
						<p class="section-subtitle">Works in all modern browsers</p>

						<div class="browser-grid">
							<div class="browser-item">
								<div class="browser-icon">Ch</div>
								<h4>Chrome</h4>
								<p>90+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ff</div>
								<h4>Firefox</h4>
								<p>88+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Sa</div>
								<h4>Safari</h4>
								<p>14+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ed</div>
								<h4>Edge</h4>
								<p>90+</p>
							</div>
						</div>

						<p style="margin-top: 2rem; text-align: center; color: #666;">
							Relies on <code>IntersectionObserver</code>, <code>requestAnimationFrame</code>, and <code>performance.now()</code>.
							All are well-supported in modern browsers. Legacy browsers without IntersectionObserver will fall back to
							highlighting the first section as active.
						</p>
					</div>
				</div>
			</section>


			<!-- Page Navigation -->
			<div data-pagenav data-pagenav-mode="pages" data-pagenav-show-category="true"></div>

		</div>

		<!-- Footer Include -->
		<div id="demo-footer-placeholder"></div>

		<!-- SmoothScroll Navigation -->
		<div data-smoothscroll
			data-smoothscroll-header-selector="#mainHeader"
			data-smoothscroll-position="right"
			data-smoothscroll-duration="800"
			data-smoothscroll-easing="ease-out"
			data-smoothscroll-hide-mobile="true">
		</div>

		<!-- Battersea Library JavaScript -->
		<script src="../../src/js/battersea-utils.js"></script>
		<script src="../../src/js/battersea-core.js"></script>
  <script src="../../src/js/battersea-nav-data.js"></script>
		<script src="../../src/js/battersea-animation.js"></script>
		<script src="../../src/js/battersea-accordion.js"></script>
		<script src="../../src/js/battersea-header.js"></script>
		<script src="../../src/js/battersea-horizontalnav.js"></script>
		<script src="../../src/js/battersea-tooltip.js"></script>
		<script src="../../src/js/battersea-smoothscroll.js"></script>
		<script src="../../src/js/battersea-accessibility.js"></script>
		<script src="../../src/js/battersea-breadcrumbs.js"></script>
tt<script src="../../src/js/battersea-pagenav.js"></script>

		<!-- Include Loader Script -->
		<script>
			function loadInclude(url, placeholderId) {
				return fetch(url)
				.then(response => {
					if (!response.ok) {
						throw new Error(`Failed to load ${url}: ${response.status}`);
					}
					return response.text();
				})
				.then(html => {
					const placeholder = document.getElementById(placeholderId);
					if (placeholder) {
						placeholder.innerHTML = html;
					}
				})
				.catch(err => {
					console.error(`Error loading ${url}:`, err);
				});
			}

			// Load all includes when DOM is ready
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', loadIncludes);
			} else {
				loadIncludes();
			}
			function loadIncludes() {
				// Load includes in order - nav must load after header since demo-nav-nested is inside the header include
				Promise.all([
					loadInclude('../../includes/preHeader.html', 'demo-preheader-placeholder'),
					loadInclude('../../includes/demo-header-component.html', 'mainHeader'),
					loadInclude('../../includes/demo-footer.html', 'demo-footer-placeholder')
				]).then(() => {
					return loadInclude('../../includes/demo-nav.html', 'demo-nav-nested');
				}).then(() => {
					console.log('All includes loaded successfully');
				});
			}
		</script>
	</body>
</html>
