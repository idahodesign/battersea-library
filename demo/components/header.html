<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Header Component - Battersea Library</title>
		<meta name="description" content="Adaptive header with shrink-on-scroll, mobile menu, and pre-header bar - Battersea Library Component">

		<!-- LESS Stylesheets -->
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-library.less">
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-demo-site.less">

		<!-- LESS.js Configuration & Compiler -->
		<script>
			less = {
				env: 'development',
				async: false,
				fileAsync: false,
				poll: 1000,
				logLevel: 2,
				globalVars: {
					'primary-color': '#667eea',
					'secondary-color': '#764ba2',
					'accent-color': '#4ecdc4'
				}
			};
		</script>
		<script src="https://cdn.jsdelivr.net/npm/less@4.2.0"></script>

		<!-- Environment Configuration (must load before includes) -->
		<script src="../../src/js/battersea-env-config.js"></script>

		<style>
			@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
		</style>
	</head>
	<body>
		<div id="site-background" class="site-background-image"></div>

		<!-- PreHeader Include (GTM, etc) -->
		<div id="demo-preheader-placeholder" class="battersea-header-pre"></div>

		<!-- Header Component with Navigation -->
		<header id="mainHeader" class="battersea-header"
			data-header
			data-sticky="true"
			data-shrink="true"
			data-shrink-offset="100"
			data-shrink-height="60"
			data-layout="right-align"
			data-transition-speed="0.3"></header>

		<div class="content-outer">

			<!-- Breadcrumb -->
			<div data-breadcrumb></div>

			<!-- ============================================ -->
			<!-- HERO SECTION -->
			<!-- ============================================ -->
			<section class="hero-section" data-scroll-section data-scroll-title="Introduction" data-animate="fade-up">
				<div class="section-box">
					<div class="hero-content">
						<h1>Header Component</h1>
						<p class="hero-subtitle">Adaptive header with shrink-on-scroll, pre-header bar, logo swapping, and a mobile menu that actually works</p>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- LIVE DEMO SECTION -->
			<!-- ============================================ -->
			<section id="demos" class="showcase-section" data-scroll-section data-scroll-title="Live Demos" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Live Demonstrations</h2>
						<p class="section-subtitle">You're already looking at it</p>

						<!-- The Header IS the Demo -->
						<div class="demo-subsection" data-animate="fade-up">
							<h3>The Header on This Page</h3>
							<p>Here's the thing &mdash; the header you see at the top of this page <em>is</em> the demo. It's running all the features right now. No need for a separate embedded example when the real thing is sitting right there.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem;">
									<h4 style="margin-bottom: 1rem;">Try these out:</h4>
									<ul style="line-height: 1.8;">
										<li><strong>Shrink-on-scroll</strong> &mdash; Scroll down the page and watch the header get smaller. It kicks in after 100px of scrolling and shrinks to 60px tall.</li>
										<li><strong>Sticky positioning</strong> &mdash; The header stays pinned to the top as you scroll. It's not going anywhere.</li>
										<li><strong>Pre-header bar</strong> &mdash; That smaller bar above the main header? That's the pre-header. It holds the accessibility controls and any extra bits you want up top.</li>
										<li><strong>Mobile menu</strong> &mdash; Resize your browser window below 768px (or just grab it on your phone). You'll see the hamburger icon appear. Tap it to open a full-screen overlay with drill-down sub-navigation panels.</li>
										<li><strong>Keyboard support</strong> &mdash; When the mobile menu is open, focus is trapped inside it. Press <kbd>Esc</kbd> to close it.</li>
										<li><strong>Logo swapping</strong> &mdash; If a <code>data-logo-mobile</code> attribute is set, the header can swap to a different logo on smaller screens.</li>
									</ul>
								</div>
							</div>
						</div>

						<!-- Shrink Behaviour -->
						<div class="demo-subsection delay-1" data-animate="fade-up">
							<h3>Shrink Behaviour</h3>
							<p>The shrink effect is controlled entirely through data attributes. When you scroll past the offset threshold, the header smoothly transitions to its compact height. Scroll back to the top and it expands again. No JavaScript configuration needed &mdash; just set the attributes and you're done.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem;">
									<pre><code>&lt;header class="battersea-header"
  data-header
  data-sticky="true"
  data-shrink="true"
  data-shrink-offset="100"
  data-shrink-height="60"
  data-transition-speed="0.3"&gt;
  &lt;!-- Header content --&gt;
&lt;/header&gt;</code></pre>
								</div>
							</div>
						</div>

						<!-- Mobile Menu -->
						<div class="demo-subsection delay-2" data-animate="fade-up">
							<h3>Mobile Menu</h3>
							<p>The mobile menu uses a full-screen overlay with drill-down panels for sub-navigation. It's not a basic hamburger toggle &mdash; it handles nested menus properly. Sub-items slide in from the right, and there's a back button to go up a level. Focus trapping keeps keyboard users inside the menu until they close it.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem;">
									<pre><code>&lt;header class="battersea-header"
  data-header
  data-mobile-menu="true"
  data-mobile-breakpoint="768"&gt;
  &lt;!-- Navigation items are automatically
       converted to mobile menu format --&gt;
&lt;/header&gt;</code></pre>
								</div>
							</div>
						</div>

						<!-- Events -->
						<div class="demo-subsection delay-3" data-animate="fade-up">
							<h3>Custom Events</h3>
							<p>The header fires events so you can hook into what it's doing. Want to run some code when the header shrinks? Or when the mobile menu opens? Just listen for the events.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem;">
									<pre><code>const header = document.querySelector('[data-header]');

// Fires when the header becomes sticky
header.addEventListener('battersea:headerSticky', (e) =&gt; {
  console.log('Header is now sticky');
});

// Fires when the header shrinks
header.addEventListener('battersea:headerShrink', (e) =&gt; {
  console.log('Header has shrunk');
});

// Fires when the header expands back
header.addEventListener('battersea:headerExpand', (e) =&gt; {
  console.log('Header expanded to full size');
});

// Mobile menu events
header.addEventListener('battersea:mobileMenuOpen', (e) =&gt; {
  console.log('Mobile menu opened');
});

header.addEventListener('battersea:mobileMenuClose', (e) =&gt; {
  console.log('Mobile menu closed');
});</code></pre>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- FEATURES SECTION -->
			<!-- ============================================ -->
			<section id="features" class="features-section" data-scroll-section data-scroll-title="Features" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Key Features</h2>

						<div class="features-grid">
							<div class="feature-card delay-1" data-animate="fade-up">
								<div class="feature-icon">&#8597;</div>
								<h3>Shrink-on-Scroll</h3>
								<p>The header smoothly transitions to a compact height as you scroll down, giving your content more room. Scroll back up and it expands again.</p>
							</div>

							<div class="feature-card delay-2" data-animate="fade-up">
								<div class="feature-icon">&#9776;</div>
								<h3>Mobile Menu</h3>
								<p>Full-screen overlay with drill-down panels for nested navigation. Not just a basic toggle &mdash; it handles complex menu structures properly.</p>
							</div>

							<div class="feature-card delay-3" data-animate="fade-up">
								<div class="feature-icon">&#8679;</div>
								<h3>Sticky Positioning</h3>
								<p>The header stays pinned to the top of the viewport as you scroll. Always accessible, never in the way.</p>
							</div>

							<div class="feature-card delay-4" data-animate="fade-up">
								<div class="feature-icon">&#9881;</div>
								<h3>Pre-header Bar</h3>
								<p>An optional bar above the main header for accessibility tools, contact info, language selectors, or whatever else you need up there.</p>
							</div>

							<div class="feature-card delay-5" data-animate="fade-up">
								<div class="feature-icon">A11y</div>
								<h3>Focus Trapping</h3>
								<p>When the mobile menu is open, keyboard focus is trapped inside it. Press Esc to close. Fully accessible for keyboard and screen reader users.</p>
							</div>

							<div class="feature-card delay-6" data-animate="fade-up">
								<div class="feature-icon">&#8644;</div>
								<h3>Logo Swapping</h3>
								<p>Automatically swap to a different logo on mobile devices. Set a mobile logo URL and the header handles the switch at the right breakpoint.</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- CONFIGURATION SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Configuration" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Configuration &amp; Options</h2>

						<div class="config-content">
							<h3>Data Attributes</h3>
							<p>Configure the header component using these data attributes on the <code>&lt;header&gt;</code> element:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Values</th>
										<th>Default</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-header</code></td>
										<td>-</td>
										<td>required</td>
										<td>Initialises the header component</td>
									</tr>
									<tr>
										<td><code>data-sticky</code></td>
										<td><code>true</code> / <code>false</code></td>
										<td><code>false</code></td>
										<td>Keep the header fixed at the top of the viewport when scrolling</td>
									</tr>
									<tr>
										<td><code>data-shrink</code></td>
										<td><code>true</code> / <code>false</code></td>
										<td><code>false</code></td>
										<td>Enable shrink-on-scroll behaviour</td>
									</tr>
									<tr>
										<td><code>data-shrink-offset</code></td>
										<td>Number (px)</td>
										<td><code>100</code></td>
										<td>How far to scroll before the header starts shrinking</td>
									</tr>
									<tr>
										<td><code>data-shrink-height</code></td>
										<td>Number (px)</td>
										<td><code>60</code></td>
										<td>The height the header shrinks down to</td>
									</tr>
									<tr>
										<td><code>data-header-height</code></td>
										<td>Number (px)</td>
										<td>auto</td>
										<td>Explicitly set the header's default height</td>
									</tr>
									<tr>
										<td><code>data-layout</code></td>
										<td><code>right-align</code></td>
										<td>-</td>
										<td>Align navigation to the right side of the header</td>
									</tr>
									<tr>
										<td><code>data-transition-speed</code></td>
										<td>Number (seconds)</td>
										<td><code>0.3</code></td>
										<td>How fast the shrink/expand animation runs</td>
									</tr>
									<tr>
										<td><code>data-logo-mobile</code></td>
										<td>URL</td>
										<td>-</td>
										<td>Path to a mobile-specific logo image</td>
									</tr>
									<tr>
										<td><code>data-mobile-menu</code></td>
										<td><code>true</code> / <code>false</code></td>
										<td><code>true</code></td>
										<td>Enable the mobile hamburger menu</td>
									</tr>
									<tr>
										<td><code>data-mobile-breakpoint</code></td>
										<td>Number (px)</td>
										<td><code>768</code></td>
										<td>Screen width below which the mobile menu activates</td>
									</tr>
								</tbody>
							</table>

							<h3 style="margin-top: 2rem;">Custom Events</h3>
							<p>The header dispatches these events so you can react to state changes:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Event</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>battersea:headerSticky</code></td>
										<td>Fired when the header becomes sticky</td>
									</tr>
									<tr>
										<td><code>battersea:headerShrink</code></td>
										<td>Fired when the header shrinks to its compact height</td>
									</tr>
									<tr>
										<td><code>battersea:headerExpand</code></td>
										<td>Fired when the header expands back to full height</td>
									</tr>
									<tr>
										<td><code>battersea:headerResize</code></td>
										<td>Fired when the viewport is resized</td>
									</tr>
									<tr>
										<td><code>battersea:mobileMenuOpen</code></td>
										<td>Fired when the mobile menu opens</td>
									</tr>
									<tr>
										<td><code>battersea:mobileMenuClose</code></td>
										<td>Fired when the mobile menu closes</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- USAGE EXAMPLES SECTION -->
			<!-- ============================================ -->
			<section class="faq-section" data-scroll-section data-scroll-title="Usage Examples" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Usage Examples</h2>

						<div data-accordion data-accordion-multiple="true">
							<div data-accordion-item class="active">
								<div data-accordion-header>Basic Sticky Header</div>
								<div data-accordion-content>
									<div>
										<p>The simplest setup &mdash; a header that sticks to the top as you scroll:</p>
										<pre><code>&lt;header class="battersea-header"
  data-header
  data-sticky="true"&gt;
  &lt;!-- Your header content --&gt;
&lt;/header&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Sticky Header with Shrink</div>
								<div data-accordion-content>
									<div>
										<p>Add the shrink behaviour so the header gets out of the way as users scroll:</p>
										<pre><code>&lt;header class="battersea-header"
  data-header
  data-sticky="true"
  data-shrink="true"
  data-shrink-offset="100"
  data-shrink-height="60"
  data-transition-speed="0.3"&gt;
  &lt;!-- Your header content --&gt;
&lt;/header&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Full Setup with Pre-header and Mobile Menu</div>
								<div data-accordion-content>
									<div>
										<p>The full configuration &mdash; exactly what this demo page uses:</p>
										<pre><code>&lt;!-- Pre-header bar --&gt;
&lt;div class="battersea-header-pre"&gt;
  &lt;!-- Accessibility tools, contact info, etc. --&gt;
&lt;/div&gt;

&lt;!-- Main header --&gt;
&lt;header class="battersea-header"
  data-header
  data-sticky="true"
  data-shrink="true"
  data-shrink-offset="100"
  data-shrink-height="60"
  data-layout="right-align"
  data-transition-speed="0.3"
  data-mobile-menu="true"
  data-mobile-breakpoint="768"&gt;
  &lt;div class="battersea-header__logo"&gt;
    &lt;a href="/"&gt;
      &lt;img src="logo.svg" alt="Site Logo"&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  &lt;nav id="demo-nav-nested"&gt;
    &lt;!-- Navigation loaded here --&gt;
  &lt;/nav&gt;
&lt;/header&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Listening to Header Events</div>
								<div data-accordion-content>
									<div>
										<p>Hook into header state changes to run your own code:</p>
										<pre><code>const header = document.querySelector('[data-header]');

// Do something when the header shrinks
header.addEventListener('battersea:headerShrink', () =&gt; {
  document.body.classList.add('header-compact');
});

// And when it expands again
header.addEventListener('battersea:headerExpand', () =&gt; {
  document.body.classList.remove('header-compact');
});

// Track mobile menu state
header.addEventListener('battersea:mobileMenuOpen', () =&gt; {
  document.body.style.overflow = 'hidden';
});

header.addEventListener('battersea:mobileMenuClose', () =&gt; {
  document.body.style.overflow = '';
});</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Mobile Logo Swapping</div>
								<div data-accordion-content>
									<div>
										<p>Use a different logo on smaller screens &mdash; handy when your desktop logo is too wide for mobile:</p>
										<pre><code>&lt;header class="battersea-header"
  data-header
  data-sticky="true"
  data-logo-mobile="/assets/logo-mobile.svg"&gt;
  &lt;div class="battersea-header__logo"&gt;
    &lt;a href="/"&gt;
      &lt;img src="/assets/logo-desktop.svg" alt="Site Logo"&gt;
    &lt;/a&gt;
  &lt;/div&gt;
&lt;/header&gt;</code></pre>
										<p>The component automatically swaps the logo <code>src</code> when the viewport width drops below the mobile breakpoint.</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- BROWSER SUPPORT SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Browser Support" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Browser Support</h2>
						<p class="section-subtitle">Works in all modern browsers</p>

						<div class="browser-grid">
							<div class="browser-item">
								<div class="browser-icon">Ch</div>
								<h4>Chrome</h4>
								<p>90+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ff</div>
								<h4>Firefox</h4>
								<p>88+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Sa</div>
								<h4>Safari</h4>
								<p>14+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ed</div>
								<h4>Edge</h4>
								<p>90+</p>
							</div>
						</div>

						<p style="margin-top: 2rem; text-align: center; color: #666;">
							The header component uses <code>position: sticky</code>, <code>ResizeObserver</code>,
							<code>MutationObserver</code>, and CSS transitions. All well-supported in modern browsers.
						</p>
					</div>
				</div>
			</section>


			<!-- Page Navigation -->
			<div data-pagenav data-pagenav-mode="pages" data-pagenav-show-category="true"></div>

		</div>

		<!-- Footer Include -->
		<div id="demo-footer-placeholder"></div>

		<!-- SmoothScroll Navigation -->
		<div data-smoothscroll
			data-smoothscroll-header-selector="#mainHeader"
			data-smoothscroll-position="right"
			data-smoothscroll-duration="800"
			data-smoothscroll-easing="ease-out"
			data-smoothscroll-hide-mobile="true">
		</div>

		<!-- Battersea Library JavaScript -->
		<script src="../../src/js/battersea-utils.js"></script>
		<script src="../../src/js/battersea-core.js"></script>
  <script src="../../src/js/battersea-nav-data.js"></script>
		<script src="../../src/js/battersea-animation.js"></script>
		<script src="../../src/js/battersea-accordion.js"></script>
		<script src="../../src/js/battersea-header.js"></script>
		<script src="../../src/js/battersea-horizontalnav.js"></script>
		<script src="../../src/js/battersea-tooltip.js"></script>
		<script src="../../src/js/battersea-smoothscroll.js"></script>
		<script src="../../src/js/battersea-accessibility.js"></script>
		<script src="../../src/js/battersea-breadcrumbs.js"></script>
tt<script src="../../src/js/battersea-pagenav.js"></script>

		<!-- Include Loader Script -->
		<script>
			function loadInclude(url, placeholderId) {
				return fetch(url)
				.then(response => {
					if (!response.ok) {
						throw new Error(`Failed to load ${url}: ${response.status}`);
					}
					return response.text();
				})
				.then(html => {
					const placeholder = document.getElementById(placeholderId);
					if (placeholder) {
						placeholder.innerHTML = html;
					}
				})
				.catch(err => {
					console.error(`Error loading ${url}:`, err);
				});
			}

			// Load all includes when DOM is ready
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', loadIncludes);
			} else {
				loadIncludes();
			}
			function loadIncludes() {
				// Load includes in order - nav must load after header since demo-nav-nested is inside the header include
				Promise.all([
					loadInclude('../../includes/preHeader.html', 'demo-preheader-placeholder'),
					loadInclude('../../includes/demo-header-component.html', 'mainHeader'),
					loadInclude('../../includes/demo-footer.html', 'demo-footer-placeholder')
				]).then(() => {
					return loadInclude('../../includes/demo-nav.html', 'demo-nav-nested');
				}).then(() => {
					console.log('All includes loaded successfully');
				});
			}
		</script>
	</body>
</html>
