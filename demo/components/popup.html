<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Popup Component - Battersea Library</title>
		<meta name="description" content="Modal dialog popups with overlay and keyboard support - Battersea Library Component">

		<!-- LESS Stylesheets -->
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-library.less">
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-demo-site.less">

		<!-- LESS.js Configuration & Compiler -->
		<script>
			less = {
				env: 'development',
				async: false,
				fileAsync: false,
				poll: 1000,
				logLevel: 2,
				globalVars: {
					'primary-color': '#667eea',
					'secondary-color': '#764ba2',
					'accent-color': '#4ecdc4'
				}
			};
		</script>
		<script src="https://cdn.jsdelivr.net/npm/less@4.2.0"></script>

		<!-- Environment Configuration (must load before includes) -->
		<script src="../../src/js/battersea-env-config.js"></script>

		<style>
			@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
		</style>
	</head>
	<body>
		<div id="site-background" class="site-background-image"></div>

		<!-- PreHeader Include (GTM, etc) -->
		<div id="demo-preheader-placeholder" class="battersea-header-pre"></div>

		<!-- Header Component with Navigation -->
		<header id="mainHeader" class="battersea-header"
			data-header
			data-sticky="true"
			data-shrink="true"
			data-shrink-offset="100"
			data-shrink-height="60"
			data-layout="right-align"
			data-transition-speed="0.3"></header>

		<div class="content-outer">
			<!-- ============================================ -->
			<!-- HERO SECTION -->
			<!-- ============================================ -->
			<section class="hero-section" data-scroll-section data-scroll-title="Introduction" data-animate="fade-up">
				<div class="section-box">
					<div class="hero-content">
						<h1>Popup Component</h1>
						<p class="hero-subtitle">Modal dialog popups with overlay backgrounds, keyboard support, and smooth animations</p>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- LIVE DEMO SECTION -->
			<!-- ============================================ -->
			<section id="demos" class="showcase-section" data-scroll-section data-scroll-title="Live Demos" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Live Demonstrations</h2>
						<p class="section-subtitle">Click the buttons to see each popup in action</p>

						<!-- Basic Popup -->
						<div class="demo-subsection" data-animate="fade-up">
							<h3>Basic Popup</h3>
							<p>A simple popup with a message. Click the button below to open it, then close it with the X button or by clicking the overlay.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem; text-align: center;">
									<button data-popup-trigger="basic-popup" style="padding: 0.75rem 1.5rem; background: #667eea; colour: white; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">Open Basic Popup</button>
								</div>
							</div>
						</div>

						<!-- Confirmation Popup -->
						<div class="demo-subsection delay-1" data-animate="fade-up">
							<h3>Confirmation Popup</h3>
							<p>Handy for those "are you sure?" moments. This one presents a question with confirm and cancel options. The overlay click-to-close is disabled here &mdash; you have to make a choice.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem; text-align: center;">
									<button data-popup-trigger="confirm-popup" style="padding: 0.75rem 1.5rem; background: #764ba2; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">Open Confirmation Popup</button>
								</div>
							</div>
						</div>

						<!-- Content Popup -->
						<div class="demo-subsection delay-2" data-animate="fade-up">
							<h3>Rich Content Popup</h3>
							<p>Popups aren't just for simple messages. You can put whatever HTML you like inside them &mdash; headings, paragraphs, lists, images, forms. Whatever you need.</p>

							<div class="demo-container">
								<div style="padding: 1.5rem; text-align: center;">
									<button data-popup-trigger="content-popup" style="padding: 0.75rem 1.5rem; background: #4ecdc4; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;">Open Content Popup</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- FEATURES SECTION -->
			<!-- ============================================ -->
			<section id="features" class="features-section" data-scroll-section data-scroll-title="Features" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Key Features</h2>

						<div class="features-grid">
							<div class="feature-card delay-1" data-animate="fade-up">
								<div class="feature-icon">&#9744;</div>
								<h3>Overlay Background</h3>
								<p>A semi-transparent overlay dims the page behind the popup, keeping the user's focus on the modal content.</p>
							</div>

							<div class="feature-card delay-2" data-animate="fade-up">
								<div class="feature-icon">&#10005;</div>
								<h3>Multiple Close Methods</h3>
								<p>Close popups with the X button, clicking the overlay, or pressing Escape. Or disable overlay-close for confirmation dialogs.</p>
							</div>

							<div class="feature-card delay-3" data-animate="fade-up">
								<div class="feature-icon">A11y</div>
								<h3>Keyboard Accessible</h3>
								<p>Full keyboard support &mdash; Tab through focusable elements, Escape to close. Focus is managed properly when popups open and close.</p>
							</div>

							<div class="feature-card delay-4" data-animate="fade-up">
								<div class="feature-icon">&#10148;</div>
								<h3>Data Attribute Driven</h3>
								<p>No JavaScript configuration required. Just add the right data attributes and the popups wire themselves up automatically.</p>
							</div>

							<div class="feature-card delay-5" data-animate="fade-up">
								<div class="feature-icon">{ }</div>
								<h3>Custom Events</h3>
								<p>Dispatches battersea:popupOpen and battersea:popupClose events so you can hook into the popup lifecycle.</p>
							</div>

							<div class="feature-card delay-6" data-animate="fade-up">
								<div class="feature-icon">~</div>
								<h3>Smooth Animations</h3>
								<p>Fade-in and scale transitions make the popups feel polished. No jarring jumps or flickers.</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- CONFIGURATION SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Configuration" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Configuration &amp; Options</h2>

						<div class="config-content">
							<h3>Data Attributes</h3>
							<p>Configure the popup component using these data attributes:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Values</th>
										<th>Default</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-popup</code></td>
										<td>String (ID)</td>
										<td>required</td>
										<td>Unique identifier for the popup. Applied to the popup container element.</td>
									</tr>
									<tr>
										<td><code>data-popup-trigger</code></td>
										<td>String (ID)</td>
										<td>required</td>
										<td>Applied to a button or link. The value must match a <code>data-popup</code> ID.</td>
									</tr>
									<tr>
										<td><code>data-popup-close</code></td>
										<td>-</td>
										<td>-</td>
										<td>Applied to any element inside the popup to make it a close button</td>
									</tr>
									<tr>
										<td><code>data-popup-close-overlay</code></td>
										<td><code>true</code> / <code>false</code></td>
										<td><code>true</code></td>
										<td>Whether clicking the overlay behind the popup closes it</td>
									</tr>
								</tbody>
							</table>

							<h3 style="margin-top: 2rem;">Popup Structure</h3>
							<p>Each popup needs a trigger button and a popup container:</p>

							<pre><code>&lt;!-- Trigger button --&gt;
&lt;button data-popup-trigger="my-popup"&gt;Open Popup&lt;/button&gt;

&lt;!-- Popup container --&gt;
&lt;div data-popup="my-popup"&gt;
  &lt;button data-popup-close&gt;&amp;times;&lt;/button&gt;
  &lt;h2&gt;Popup Title&lt;/h2&gt;
  &lt;p&gt;Your content goes here.&lt;/p&gt;
&lt;/div&gt;</code></pre>

							<h3 style="margin-top: 2rem;">Custom Events</h3>
							<p>Listen for popup state changes:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Event</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>battersea:popupOpen</code></td>
										<td>Fired when a popup opens. The event detail includes the popup ID.</td>
									</tr>
									<tr>
										<td><code>battersea:popupClose</code></td>
										<td>Fired when a popup closes. The event detail includes the popup ID.</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- USAGE EXAMPLES SECTION -->
			<!-- ============================================ -->
			<section class="faq-section" data-scroll-section data-scroll-title="Usage Examples" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Usage Examples</h2>

						<div data-accordion data-accordion-multiple="true">
							<div data-accordion-item class="active">
								<div data-accordion-header>Basic Popup</div>
								<div data-accordion-content>
									<div>
										<p>The simplest popup &mdash; a trigger button and a popup with a close button:</p>
										<pre><code>&lt;button data-popup-trigger="info"&gt;More Info&lt;/button&gt;

&lt;div data-popup="info"&gt;
  &lt;button data-popup-close&gt;&amp;times;&lt;/button&gt;
  &lt;h2&gt;Information&lt;/h2&gt;
  &lt;p&gt;Here's some useful information.&lt;/p&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Confirmation Dialog</div>
								<div data-accordion-content>
									<div>
										<p>Disable overlay closing so users have to explicitly confirm or cancel:</p>
										<pre><code>&lt;button data-popup-trigger="delete-confirm"&gt;
  Delete Item
&lt;/button&gt;

&lt;div data-popup="delete-confirm"
     data-popup-close-overlay="false"&gt;
  &lt;h2&gt;Are you sure?&lt;/h2&gt;
  &lt;p&gt;This action can't be undone.&lt;/p&gt;
  &lt;button data-popup-close&gt;Cancel&lt;/button&gt;
  &lt;button data-popup-close onclick="deleteItem()"&gt;
    Yes, delete it
  &lt;/button&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Rich Content Popup</div>
								<div data-accordion-content>
									<div>
										<p>Put any HTML content inside the popup &mdash; forms, images, lists, whatever you need:</p>
										<pre><code>&lt;button data-popup-trigger="details"&gt;
  View Details
&lt;/button&gt;

&lt;div data-popup="details"&gt;
  &lt;button data-popup-close&gt;&amp;times;&lt;/button&gt;
  &lt;h2&gt;Project Details&lt;/h2&gt;
  &lt;p&gt;Here's a breakdown of the project:&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;Phase 1: Research&lt;/li&gt;
    &lt;li&gt;Phase 2: Design&lt;/li&gt;
    &lt;li&gt;Phase 3: Development&lt;/li&gt;
  &lt;/ul&gt;
  &lt;img src="chart.png" alt="Project chart"&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Listening to Events</div>
								<div data-accordion-content>
									<div>
										<p>Hook into the popup lifecycle with custom events:</p>
										<pre><code>document.addEventListener('battersea:popupOpen', (e) =&gt; {
  console.log('Popup opened:', e.detail.id);

  // Maybe pause a video in the background
  // or track an analytics event
});

document.addEventListener('battersea:popupClose', (e) =&gt; {
  console.log('Popup closed:', e.detail.id);

  // Resume background content
  // or clean up form state
});</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Multiple Triggers for One Popup</div>
								<div data-accordion-content>
									<div>
										<p>You can have multiple buttons that all open the same popup &mdash; just give them the same trigger ID:</p>
										<pre><code>&lt;!-- Both buttons open the same popup --&gt;
&lt;button data-popup-trigger="help"&gt;Need help?&lt;/button&gt;
&lt;button data-popup-trigger="help"&gt;Support&lt;/button&gt;

&lt;div data-popup="help"&gt;
  &lt;button data-popup-close&gt;&amp;times;&lt;/button&gt;
  &lt;h2&gt;Help &amp;amp; Support&lt;/h2&gt;
  &lt;p&gt;Get in touch if you're stuck.&lt;/p&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- BROWSER SUPPORT SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Browser Support" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Browser Support</h2>
						<p class="section-subtitle">Works in all modern browsers</p>

						<div class="browser-grid">
							<div class="browser-item">
								<div class="browser-icon">Ch</div>
								<h4>Chrome</h4>
								<p>90+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ff</div>
								<h4>Firefox</h4>
								<p>88+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Sa</div>
								<h4>Safari</h4>
								<p>14+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ed</div>
								<h4>Edge</h4>
								<p>90+</p>
							</div>
						</div>

						<p style="margin-top: 2rem; text-align: center; color: #666;">
							The popup component uses CSS transitions, <code>focus</code> management,
							and custom events. No polyfills needed for modern browsers.
						</p>
					</div>
				</div>
			</section>

		</div>

		<!-- ============================================ -->
		<!-- POPUP MARKUP (outside content-outer) -->
		<!-- ============================================ -->

		<!-- Basic Popup -->
		<div data-popup="basic-popup">
			<button data-popup-close>&times;</button>
			<h2>Hello there</h2>
			<p>This is a basic popup. Nothing fancy &mdash; just a simple message in a modal dialog. Click the X button, press Escape, or click the overlay to close it.</p>
		</div>

		<!-- Confirmation Popup -->
		<div data-popup="confirm-popup" data-popup-close-overlay="false">
			<button data-popup-close>&times;</button>
			<h2>Are you sure about this?</h2>
			<p>This is a confirmation popup. The overlay click-to-close is disabled, so you'll need to pick one of the options below.</p>
			<div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: centre; justify-content: center;">
				<button data-popup-close style="padding: 0.5rem 1.5rem; background: #e0e0e0; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
				<button data-popup-close style="padding: 0.5rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">Confirm</button>
			</div>
		</div>

		<!-- Content Popup -->
		<div data-popup="content-popup">
			<button data-popup-close>&times;</button>
			<h2>Rich Content Example</h2>
			<p>Popups can hold any HTML you like. Here's a mix of content to show what's possible:</p>
			<h3 style="margin-top: 1rem;">What's included in Battersea Library?</h3>
			<ul style="margin: 0.5rem 0; padding-left: 1.5rem; line-height: 1.8;">
				<li>18 modular components</li>
				<li>Zero dependencies &mdash; pure vanilla JavaScript</li>
				<li>Data-attribute configuration</li>
				<li>LESS-based theming with CSS variables</li>
				<li>Keyboard accessible throughout</li>
				<li>Works on all modern browsers</li>
			</ul>
			<p style="margin-top: 1rem;">You can put forms, images, videos, embedded content &mdash; really anything you need &mdash; inside a popup.</p>
		</div>

		<!-- Footer Include -->
		<div id="demo-footer-placeholder"></div>

		<!-- SmoothScroll Navigation -->
		<div data-smoothscroll
			data-smoothscroll-header-selector="#mainHeader"
			data-smoothscroll-position="right"
			data-smoothscroll-duration="800"
			data-smoothscroll-easing="ease-out"
			data-smoothscroll-hide-mobile="true">
		</div>

		<!-- Battersea Library JavaScript -->
		<script src="../../src/js/battersea-utils.js"></script>
		<script src="../../src/js/battersea-core.js"></script>
		<script src="../../src/js/battersea-animation.js"></script>
		<script src="../../src/js/battersea-accordion.js"></script>
		<script src="../../src/js/battersea-popup.js"></script>
		<script src="../../src/js/battersea-header.js"></script>
		<script src="../../src/js/battersea-horizontalnav.js"></script>
		<script src="../../src/js/battersea-tooltip.js"></script>
		<script src="../../src/js/battersea-smoothscroll.js"></script>
		<script src="../../src/js/battersea-accessibility.js"></script>

		<!-- Include Loader Script -->
		<script>
			function loadInclude(url, placeholderId) {
				return fetch(url)
				.then(response => {
					if (!response.ok) {
						throw new Error(`Failed to load ${url}: ${response.status}`);
					}
					return response.text();
				})
				.then(html => {
					const placeholder = document.getElementById(placeholderId);
					if (placeholder) {
						placeholder.innerHTML = html;
					}
				})
				.catch(err => {
					console.error(`Error loading ${url}:`, err);
				});
			}

			// Load all includes when DOM is ready
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', loadIncludes);
			} else {
				loadIncludes();
			}
			function loadIncludes() {
				// Load includes in order - nav must load after header since demo-nav-nested is inside the header include
				Promise.all([
					loadInclude('../../includes/preHeader.html', 'demo-preheader-placeholder'),
					loadInclude('../../includes/demo-header-component.html', 'mainHeader'),
					loadInclude('../../includes/demo-footer.html', 'demo-footer-placeholder')
				]).then(() => {
					return loadInclude('../../includes/demo-nav.html', 'demo-nav-nested');
				}).then(() => {
					console.log('All includes loaded successfully');
				});
			}
		</script>
	</body>
</html>
