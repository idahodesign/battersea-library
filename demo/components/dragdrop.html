<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>DragDrop Component - Battersea Library</title>
		<meta name="description" content="Reorderable lists and multi-container sorting with sessionStorage persistence - Battersea Library Component">

		<!-- LESS Stylesheets -->
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-library.less">
		<link rel="stylesheet/less" type="text/css" href="../../src/css/battersea-demo-site.less">

		<!-- LESS.js Configuration & Compiler -->
		<script>
			less = {
				env: 'development',
				async: false,
				fileAsync: false,
				poll: 1000,
				logLevel: 2,
				globalVars: {
					'primary-color': '#667eea',
					'secondary-color': '#764ba2',
					'accent-color': '#4ecdc4'
				}
			};
		</script>
		<script src="https://cdn.jsdelivr.net/npm/less@4.2.0"></script>

		<!-- Environment Configuration (must load before includes) -->
		<script src="../../src/js/battersea-env-config.js"></script>

		<style>
			@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
		</style>
	</head>
	<body>
		<div id="site-background" class="site-background-image"></div>

		<!-- PreHeader Include (GTM, etc) -->
		<div id="demo-preheader-placeholder" class="battersea-header-pre"></div>

		<!-- Header Component with Navigation -->
		<header id="mainHeader" class="battersea-header"
			data-header
			data-sticky="true"
			data-shrink="true"
			data-shrink-offset="100"
			data-shrink-height="60"
			data-layout="right-align"
			data-transition-speed="0.3"></header>

		<div class="content-outer">

			<!-- Breadcrumb -->
			<div data-breadcrumb></div>

			<!-- ============================================ -->
			<!-- HERO SECTION -->
			<!-- ============================================ -->
			<section class="hero-section" data-scroll-section data-scroll-title="Introduction" data-animate="fade-up">
				<div class="section-box">
					<div class="hero-content">
						<h1>DragDrop Component</h1>
						<p class="hero-subtitle">Grab things. Move them. The component remembers where you put them.</p>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- REORDER DEMO -->
			<!-- ============================================ -->
			<section id="demos" class="showcase-section" data-scroll-section data-scroll-title="Reorder Demo" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Reorder Mode</h2>
						<p class="section-subtitle">Drag the cities into your preferred order. Refresh the page and they stay put.</p>

						<div class="demo-container" data-animate="fade-up">
							<div data-drag-drop data-drag-drop-mode="reorder" data-drag-drop-key="favourite-cities">
								<div data-drag-item data-drag-id="london">London</div>
								<div data-drag-item data-drag-id="tokyo">Tokyo</div>
								<div data-drag-item data-drag-id="new-york">New York</div>
								<div data-drag-item data-drag-id="paris">Paris</div>
								<div data-drag-item data-drag-id="sydney">Sydney</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- SORT DEMO -->
			<!-- ============================================ -->
			<section class="showcase-section" data-scroll-section data-scroll-title="Sort Demo" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Sort Mode</h2>
						<p class="section-subtitle">Drag languages from the source into whichever category you think fits. Disagree with yourself later? Just move them again.</p>

						<div class="demo-container" data-animate="fade-up">
							<div data-drag-drop data-drag-drop-mode="sort" data-drag-drop-key="programming-categories">
								<div data-drag-container="source" data-drag-container-label="Available Languages">
									<div data-drag-item data-drag-id="javascript">JavaScript</div>
									<div data-drag-item data-drag-id="python">Python</div>
									<div data-drag-item data-drag-id="html">HTML</div>
									<div data-drag-item data-drag-id="css">CSS</div>
									<div data-drag-item data-drag-id="java">Java</div>
									<div data-drag-item data-drag-id="php">PHP</div>
									<div data-drag-item data-drag-id="ruby">Ruby</div>
									<div data-drag-item data-drag-id="csharp">C#</div>
								</div>
								<div data-drag-container="frontend" data-drag-container-label="Front-end"></div>
								<div data-drag-container="backend" data-drag-container-label="Back-end"></div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- DISPLAY DEMO -->
			<!-- ============================================ -->
			<section class="showcase-section" data-scroll-section data-scroll-title="Display Demo" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Display Mode</h2>
						<p class="section-subtitle">This reads your saved choices from the demos above. Make some changes, then scroll down to see them appear here.</p>

						<div class="demo-container" data-animate="fade-up">
							<h3 style="margin-bottom: 1rem;">Your City Rankings</h3>
							<div data-drag-drop data-drag-drop-mode="display" data-drag-drop-key="favourite-cities"></div>

							<h3 style="margin-top: 2rem; margin-bottom: 1rem;">Your Language Categories</h3>
							<div data-drag-drop data-drag-drop-mode="display" data-drag-drop-key="programming-categories"></div>
						</div>

						<p style="margin-top: 1rem; color: #666; font-size: 0.9rem;">Display mode reads from sessionStorage, so it works on any page that knows the storage key. Refresh the page after making changes above to see the display update.</p>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- FEATURES SECTION -->
			<!-- ============================================ -->
			<section id="features" class="features-section" data-scroll-section data-scroll-title="Features" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Key Features</h2>

						<div class="features-grid">
							<div class="feature-card delay-1" data-animate="fade-up">
								<div class="feature-icon">&#8693;</div>
								<h3>Reorder Mode</h3>
								<p>Drag items up and down to put them in whatever order makes sense to you. One container, clean and simple.</p>
							</div>

							<div class="feature-card delay-2" data-animate="fade-up">
								<div class="feature-icon">&#9776;</div>
								<h3>Sort Mode</h3>
								<p>Move items between multiple containers. One source list, as many destination groups as you need.</p>
							</div>

							<div class="feature-card delay-3" data-animate="fade-up">
								<div class="feature-icon">&#128190;</div>
								<h3>Session State</h3>
								<p>Everything saves to sessionStorage automatically. Your choices stick around while you browse the site but clear when you close the tab.</p>
							</div>

							<div class="feature-card delay-4" data-animate="fade-up">
								<div class="feature-icon">&#9995;</div>
								<h3>Touch Support</h3>
								<p>Works with mouse and touch. Same drag logic, same result, whether you're on a laptop or a phone.</p>
							</div>

							<div class="feature-card delay-5" data-animate="fade-up">
								<div class="feature-icon">&#128065;</div>
								<h3>Display Mode</h3>
								<p>Show saved state on a completely different page. Read-only, no drag events, just the results rendered cleanly.</p>
							</div>

							<div class="feature-card delay-6" data-animate="fade-up">
								<div class="feature-icon">&lt;/&gt;</div>
								<h3>Custom Events</h3>
								<p>Listen for drag start, end, save, and restore events. Hook into the lifecycle however you like.</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- CONFIGURATION SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Configuration" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Configuration</h2>

						<div class="config-content">
							<h3>Container Options</h3>
							<p>Set these on the main container element:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Values</th>
										<th>Default</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-drag-drop</code></td>
										<td>-</td>
										<td>required</td>
										<td>Initialises the DragDrop component</td>
									</tr>
									<tr>
										<td><code>data-drag-drop-mode</code></td>
										<td><code>reorder</code> / <code>sort</code> / <code>display</code></td>
										<td><code>reorder</code></td>
										<td>Which mode to use</td>
									</tr>
									<tr>
										<td><code>data-drag-drop-key</code></td>
										<td>String</td>
										<td>none</td>
										<td>sessionStorage key for saving and loading state</td>
									</tr>
								</tbody>
							</table>

							<h3 style="margin-top: 2rem;">Item Attributes</h3>
							<p>Set these on each draggable item:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-drag-item</code></td>
										<td>Marks the element as draggable</td>
									</tr>
									<tr>
										<td><code>data-drag-id</code></td>
										<td>Unique identifier for the item (used in sessionStorage)</td>
									</tr>
								</tbody>
							</table>

							<h3 style="margin-top: 2rem;">Container Attributes (Sort Mode)</h3>
							<p>Set these on each container in sort mode:</p>

							<table class="config-table">
								<thead>
									<tr>
										<th>Attribute</th>
										<th>Description</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td><code>data-drag-container</code></td>
										<td>Container name (e.g. <code>source</code>, <code>frontend</code>)</td>
									</tr>
									<tr>
										<td><code>data-drag-container-label</code></td>
										<td>Human-readable label shown above the container</td>
									</tr>
									<tr>
										<td><code>data-drag-drop-max</code></td>
										<td>Maximum number of items this container will accept</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- USAGE EXAMPLES SECTION -->
			<!-- ============================================ -->
			<section class="faq-section" data-scroll-section data-scroll-title="Usage" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Usage Examples</h2>

						<div data-accordion data-accordion-multiple="true">
							<div data-accordion-item class="active">
								<div data-accordion-header>Basic Reorder List</div>
								<div data-accordion-content>
									<div>
										<p>The simplest setup. Items in a single container, draggable into any order:</p>
										<pre><code>&lt;div data-drag-drop
     data-drag-drop-mode="reorder"
     data-drag-drop-key="my-list"&gt;
  &lt;div data-drag-item data-drag-id="item1"&gt;First item&lt;/div&gt;
  &lt;div data-drag-item data-drag-id="item2"&gt;Second item&lt;/div&gt;
  &lt;div data-drag-item data-drag-id="item3"&gt;Third item&lt;/div&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Multi-Container Sorting</div>
								<div data-accordion-content>
									<div>
										<p>A source container with items, plus destination containers to sort them into:</p>
										<pre><code>&lt;div data-drag-drop
     data-drag-drop-mode="sort"
     data-drag-drop-key="my-sort"&gt;
  &lt;div data-drag-container="source"
       data-drag-container-label="Options"&gt;
    &lt;div data-drag-item data-drag-id="a"&gt;Option A&lt;/div&gt;
    &lt;div data-drag-item data-drag-id="b"&gt;Option B&lt;/div&gt;
  &lt;/div&gt;
  &lt;div data-drag-container="group1"
       data-drag-container-label="Group 1"&gt;&lt;/div&gt;
  &lt;div data-drag-container="group2"
       data-drag-container-label="Group 2"&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Display Saved State</div>
								<div data-accordion-content>
									<div>
										<p>On a different page, render the saved state as a read-only list. Just set the mode to <code>display</code> and use the same key:</p>
										<pre><code>&lt;div data-drag-drop
     data-drag-drop-mode="display"
     data-drag-drop-key="my-list"&gt;&lt;/div&gt;</code></pre>
										<p>The component reads sessionStorage and builds the output automatically. If nothing has been saved yet, it shows a placeholder message.</p>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Container Item Limits</div>
								<div data-accordion-content>
									<div>
										<p>Limit how many items a container will accept with <code>data-drag-drop-max</code>:</p>
										<pre><code>&lt;div data-drag-container="team"
     data-drag-container-label="Team"
     data-drag-drop-max="3"&gt;&lt;/div&gt;</code></pre>
										<p>If someone tries to drop a fourth item, it snaps back to where it came from.</p>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Listening to Events</div>
								<div data-accordion-content>
									<div>
										<p>The component fires custom events on the main element:</p>
										<pre><code>const dd = document.querySelector('[data-drag-drop]');

dd.addEventListener('battersea:dragStart', (e) =&gt; {
  console.log('Started dragging:', e.detail.itemId);
});

dd.addEventListener('battersea:dragEnd', (e) =&gt; {
  console.log('Dropped:', e.detail.itemId);
  console.log('From:', e.detail.fromContainer);
  console.log('To:', e.detail.toContainer);
});

dd.addEventListener('battersea:dragSave', (e) =&gt; {
  console.log('Saved to sessionStorage:', e.detail.data);
});</code></pre>
									</div>
								</div>
							</div>

							<div data-accordion-item>
								<div data-accordion-header>Clearing Saved Data</div>
								<div data-accordion-content>
									<div>
										<p>Remove saved state from sessionStorage by key:</p>
										<pre><code>sessionStorage.removeItem('battersea-dragdrop-my-list');</code></pre>
										<p>The component prefixes all keys with <code>battersea-dragdrop-</code> to avoid collisions.</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- ============================================ -->
			<!-- BROWSER SUPPORT SECTION -->
			<!-- ============================================ -->
			<section class="getting-started-section" data-scroll-section data-scroll-title="Browser Support" data-animate="fade-up">
				<div class="section-box">
					<div class="container">
						<h2 class="section-title">Browser Support</h2>
						<p class="section-subtitle">Works in all modern browsers</p>

						<div class="browser-grid">
							<div class="browser-item">
								<div class="browser-icon">Ch</div>
								<h4>Chrome</h4>
								<p>90+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ff</div>
								<h4>Firefox</h4>
								<p>88+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Sa</div>
								<h4>Safari</h4>
								<p>15+</p>
							</div>

							<div class="browser-item">
								<div class="browser-icon">Ed</div>
								<h4>Edge</h4>
								<p>90+</p>
							</div>
						</div>

						<p style="margin-top: 2rem; text-align: center; color: #666;">
							Uses <code>elementFromPoint</code>, <code>sessionStorage</code>, and touch events. The <code>:has()</code> selector for empty container hints requires Safari 15.4+ and Chrome 105+.
						</p>
					</div>
				</div>
			</section>

		</div>

		<!-- Footer Include -->
		<div id="demo-footer-placeholder"></div>

		<!-- SmoothScroll Navigation -->
		<div data-smoothscroll
			data-smoothscroll-header-selector="#mainHeader"
			data-smoothscroll-position="right"
			data-smoothscroll-duration="800"
			data-smoothscroll-easing="ease-out"
			data-smoothscroll-hide-mobile="true">
		</div>


		<!-- Battersea Library JavaScript -->
		<script src="../../src/js/battersea-utils.js"></script>
		<script src="../../src/js/battersea-core.js"></script>
  <script src="../../src/js/battersea-nav-data.js"></script>
		<script src="../../src/js/battersea-animation.js"></script>
		<script src="../../src/js/battersea-accordion.js"></script>
		<script src="../../src/js/battersea-header.js"></script>
		<script src="../../src/js/battersea-horizontalnav.js"></script>
		<script src="../../src/js/battersea-tooltip.js"></script>
		<script src="../../src/js/battersea-smoothscroll.js"></script>
		<script src="../../src/js/battersea-accessibility.js"></script>
		<script src="../../src/js/battersea-breadcrumbs.js"></script>
		<script src="../../src/js/battersea-dragdrop.js"></script>

		<!-- Include Loader Script -->
		<script>
			function loadInclude(url, placeholderId) {
				return fetch(url)
				.then(response => {
					if (!response.ok) {
						throw new Error(`Failed to load ${url}: ${response.status}`);
					}
					return response.text();
				})
				.then(html => {
					const placeholder = document.getElementById(placeholderId);
					if (placeholder) {
						placeholder.innerHTML = html;
					}
				})
				.catch(err => {
					console.error(`Error loading ${url}:`, err);
				});
			}

			// Load all includes when DOM is ready
			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', loadIncludes);
			} else {
				loadIncludes();
			}
			function loadIncludes() {
				// Load includes in order - nav must load after header since demo-nav-nested is inside the header include
				Promise.all([
					loadInclude('../../includes/preHeader.html', 'demo-preheader-placeholder'),
					loadInclude('../../includes/demo-header-component.html', 'mainHeader'),
					loadInclude('../../includes/demo-footer.html', 'demo-footer-placeholder')
				]).then(() => {
					return loadInclude('../../includes/demo-nav.html', 'demo-nav-nested');
				}).then(() => {
					console.log('All includes loaded successfully');
				});
			}
		</script>
	</body>
</html>
