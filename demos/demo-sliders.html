<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Battersea Sliders - Infinite Loop Demo</title>
  <link rel="stylesheet" href="/src/css/battersea-library.css">
  <style>
    * { box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      background: #f5f5f5;
    }
    
    section {
      margin: 40px 0;
      padding: 30px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #333;
      border-bottom: 3px solid #007bff;
      padding-bottom: 15px;
      margin-bottom: 10px;
    }
    
    h2 {
      color: #666;
      margin-top: 0;
      border-left: 4px solid #007bff;
      padding-left: 15px;
    }
    
    h3 {
      color: #555;
      margin: 25px 0 15px 0;
    }
    
    .info-box {
      background: #e7f3ff;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
      border-left: 4px solid #007bff;
      font-size: 14px;
    }
    
    .info-box strong {
      display: block;
      margin-bottom: 5px;
      color: #0056b3;
    }
    
    .feature-list {
      margin: 10px 0 0 20px;
      padding: 0;
    }
    
    .feature-list li {
      margin: 5px 0;
    }
    
    /* Slider demo styles */
    .slider-slide {
      min-height: 300px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 48px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      padding: 40px;
      text-align: center;
    }
    
    .slide-number {
      font-size: 72px;
      margin-bottom: 10px;
    }
    
    .slide-label {
      font-size: 20px;
      opacity: 0.9;
      font-weight: normal;
    }
    
    .slider-slide-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .slider-slide-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .slider-slide-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .slider-slide-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    .slider-slide-5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    
    /* Add some spacing between sliders */
    [data-slider] {
      margin-bottom: 40px;
    }
    
    /* MultiSlider demo */
    .multislider-item {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 60px 20px;
      text-align: center;
      border-radius: 8px;
      font-weight: bold;
      font-size: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 200px;
    }
    
    .multislider-item:nth-child(even) {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .multislider-item:nth-child(3n) {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    /* Instructions */
    .instructions {
      background: #fff3cd;
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
      border-left: 4px solid #ffc107;
    }
    
    .instructions strong {
      display: block;
      margin-bottom: 8px;
      color: #856404;
    }
    
    /* Status badges */
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }
    
    .badge-new {
      background: #28a745;
      color: white;
    }
    
    .badge-infinite {
      background: #17a2b8;
      color: white;
    }
  </style>
</head>
<body>
  <h1>üé† Battersea Sliders - Infinite Loop Demo</h1>
  <p style="font-size: 18px; color: #666; margin-bottom: 30px;">
    Testing the new clone-based infinite sliding for both Slider and MultiSlider components
  </p>

  <!-- SLIDE TRANSITION - INFINITE LOOP -->
  <section>
    <h2>1. Slider - Slide Transition <span class="badge badge-infinite">INFINITE LOOP</span></h2>
    <div class="info-box">
      <strong>Features:</strong>
      <ul class="feature-list">
        <li>‚ú® True infinite loop - slide 1 appears to come from the right after slide 3</li>
        <li>Clone-based implementation</li>
        <li>Smooth continuous sliding</li>
        <li>Keyboard navigation (‚Üê ‚Üí)</li>
        <li>Touch/swipe support</li>
        <li>Autoplay with pause on hover</li>
      </ul>
    </div>
    
    <div class="instructions">
      <strong>üß™ How to test the infinite loop:</strong>
      Let autoplay run through all slides. Watch what happens after Slide 3 - Slide 1 should smoothly slide in from the right (not jump). You can also use arrow keys or click the arrows.
    </div>
    
    <h3>With Controls & Autoplay</h3>
    <div data-slider 
         data-slider-autoplay="true" 
         data-slider-interval="3000" 
         data-slider-transition="slide"
         data-slider-dots="true"
         data-slider-arrows="true"
         tabindex="0">
      <div data-slider-track>
        <div data-slider-item class="slider-slide slider-slide-1">
          <div class="slide-number">1</div>
          <div class="slide-label">Watch the infinite loop!</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-2">
          <div class="slide-number">2</div>
          <div class="slide-label">Slides continuously</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-3">
          <div class="slide-number">3</div>
          <div class="slide-label">No jumping back!</div>
        </div>
      </div>
      <button data-slider-prev aria-label="Previous">‚Äπ</button>
      <button data-slider-next aria-label="Next">‚Ä∫</button>
      <div data-slider-dots></div>
    </div>
    
    <h3>5 Slides - Clean (No Controls)</h3>
    <div data-slider 
         data-slider-autoplay="true" 
         data-slider-interval="2500" 
         data-slider-transition="slide"
         data-slider-dots="false"
         data-slider-arrows="false"
         tabindex="0">
      <div data-slider-track>
        <div data-slider-item class="slider-slide slider-slide-1">
          <div class="slide-number">1</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-2">
          <div class="slide-number">2</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-3">
          <div class="slide-number">3</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-4">
          <div class="slide-number">4</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-5">
          <div class="slide-number">5</div>
        </div>
      </div>
    </div>
    
    <h3>Manual Navigation (No Autoplay)</h3>
    <div data-slider 
         data-slider-autoplay="false" 
         data-slider-transition="slide"
         data-slider-dots="true"
         data-slider-arrows="true"
         tabindex="0">
      <div data-slider-track>
        <div data-slider-item class="slider-slide slider-slide-3">
          <div class="slide-number">1</div>
          <div class="slide-label">Click next repeatedly ‚Üí</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-4">
          <div class="slide-number">2</div>
          <div class="slide-label">Keep going ‚Üí</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-5">
          <div class="slide-number">3</div>
          <div class="slide-label">Watch it loop ‚Üí</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-1">
          <div class="slide-number">4</div>
          <div class="slide-label">Infinite! ‚àû</div>
        </div>
      </div>
      <button data-slider-prev aria-label="Previous">‚Äπ</button>
      <button data-slider-next aria-label="Next">‚Ä∫</button>
      <div data-slider-dots></div>
    </div>
  </section>

  <!-- FADE TRANSITION - COMPARISON -->
  <section>
    <h2>2. Slider - Fade Transition (Comparison)</h2>
    <div class="info-box">
      <strong>Note:</strong>
      Fade transition doesn't need infinite loop (no directional sliding). Included for comparison.
    </div>
    
    <div data-slider 
         data-slider-autoplay="true" 
         data-slider-interval="3000" 
         data-slider-transition="fade"
         data-slider-dots="true"
         data-slider-arrows="true"
         tabindex="0">
      <div data-slider-track>
        <div data-slider-item class="slider-slide slider-slide-1">
          <div class="slide-number">1</div>
          <div class="slide-label">Fade Transition</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-2">
          <div class="slide-number">2</div>
          <div class="slide-label">Crossfade Effect</div>
        </div>
        <div data-slider-item class="slider-slide slider-slide-3">
          <div class="slide-number">3</div>
          <div class="slide-label">No Directional Slide</div>
        </div>
      </div>
      <button data-slider-prev aria-label="Previous">‚Äπ</button>
      <button data-slider-next aria-label="Next">‚Ä∫</button>
      <div data-slider-dots></div>
    </div>
  </section>

  <!-- MULTI-SLIDER - INFINITE LOOP -->
  <section>
    <h2>3. Multi-Slider - Infinite Loop <span class="badge badge-infinite">INFINITE LOOP</span></h2>
    <div class="info-box">
      <strong>Features:</strong>
      <ul class="feature-list">
        <li>‚ú® Infinite loop for multi-item carousel</li>
        <li>Shows multiple items at once</li>
        <li>Responsive breakpoints (desktop/tablet/mobile)</li>
        <li>Smooth sliding in both directions</li>
        <li>Clone-based implementation</li>
      </ul>
    </div>
    
    <div class="instructions">
      <strong>üß™ How to test:</strong>
      Click next repeatedly. When you reach item 8, it should smoothly slide to show item 1 coming from the right (not jump). Works in both directions!
    </div>
    
    <h3>3 Items Per View (Desktop) ‚Üí 2 (Tablet) ‚Üí 1 (Mobile)</h3>
    <div data-multislider 
         data-multislider-items="3" 
         data-multislider-items-md="2" 
         data-multislider-items-sm="1" 
         data-multislider-gap="20" 
         data-multislider-autoplay="true" 
         data-multislider-interval="3000">
      <div data-multislider-track>
        <div data-multislider-item class="multislider-item">1</div>
        <div data-multislider-item class="multislider-item">2</div>
        <div data-multislider-item class="multislider-item">3</div>
        <div data-multislider-item class="multislider-item">4</div>
        <div data-multislider-item class="multislider-item">5</div>
        <div data-multislider-item class="multislider-item">6</div>
        <div data-multislider-item class="multislider-item">7</div>
        <div data-multislider-item class="multislider-item">8</div>
      </div>
      <button data-multislider-prev>‚Äπ</button>
      <button data-multislider-next>‚Ä∫</button>
    </div>
    
    <h3>4 Items Per View - Manual Control</h3>
    <div data-multislider 
         data-multislider-items="4" 
         data-multislider-items-md="2" 
         data-multislider-items-sm="1" 
         data-multislider-gap="15" 
         data-multislider-autoplay="false">
      <div data-multislider-track>
        <div data-multislider-item class="multislider-item">A</div>
        <div data-multislider-item class="multislider-item">B</div>
        <div data-multislider-item class="multislider-item">C</div>
        <div data-multislider-item class="multislider-item">D</div>
        <div data-multislider-item class="multislider-item">E</div>
        <div data-multislider-item class="multislider-item">F</div>
        <div data-multislider-item class="multislider-item">G</div>
        <div data-multislider-item class="multislider-item">H</div>
        <div data-multislider-item class="multislider-item">I</div>
        <div data-multislider-item class="multislider-item">J</div>
      </div>
      <button data-multislider-prev>‚Äπ</button>
      <button data-multislider-next>‚Ä∫</button>
    </div>
    
    <h3>Many Items - Fast Autoplay</h3>
    <div data-multislider 
         data-multislider-items="5" 
         data-multislider-items-md="3" 
         data-multislider-items-sm="1" 
         data-multislider-gap="10" 
         data-multislider-autoplay="true" 
         data-multislider-interval="2000">
      <div data-multislider-track>
        <div data-multislider-item class="multislider-item">01</div>
        <div data-multislider-item class="multislider-item">02</div>
        <div data-multislider-item class="multislider-item">03</div>
        <div data-multislider-item class="multislider-item">04</div>
        <div data-multislider-item class="multislider-item">05</div>
        <div data-multislider-item class="multislider-item">06</div>
        <div data-multislider-item class="multislider-item">07</div>
        <div data-multislider-item class="multislider-item">08</div>
        <div data-multislider-item class="multislider-item">09</div>
        <div data-multislider-item class="multislider-item">10</div>
        <div data-multislider-item class="multislider-item">11</div>
        <div data-multislider-item class="multislider-item">12</div>
      </div>
      <button data-multislider-prev>‚Äπ</button>
      <button data-multislider-next>‚Ä∫</button>
    </div>
  </section>

  <!-- TECHNICAL NOTES -->
  <section>
    <h2>üìã Technical Notes</h2>
    <div class="info-box">
      <strong>How the Infinite Loop Works:</strong>
      <ul class="feature-list">
        <li><strong>Slide Transition:</strong> Clones first slide at end, last slide at beginning. When reaching a clone, instantly snaps to the real slide (no transition).</li>
        <li><strong>Multi-Slider:</strong> Clones enough items to fill the view on both ends. Snaps back when reaching cloned sections.</li>
        <li><strong>Accessibility:</strong> Cloned slides have <code>aria-hidden="true"</code></li>
        <li><strong>CSS Class:</strong> Clones have <code>.battersea-slider-clone</code> class</li>
        <li><strong>Seamless:</strong> The snap-back happens so fast (transition: none) that users don't notice!</li>
      </ul>
    </div>
    
    <div class="info-box">
      <strong>Browser Compatibility:</strong>
      <ul class="feature-list">
        <li>Uses CSS transforms for smooth hardware-accelerated animations</li>
        <li>TransitionEnd events for precise timing</li>
        <li>Touch events for mobile swipe support</li>
        <li>Keyboard events for accessibility</li>
      </ul>
    </div>
  </section>

  <!-- Load Battersea Library -->
  <script src="/src/js/battersea-utils.js"></script>
  <script src="/src/js/battersea-core.js"></script>
  <script src="/src/js/battersea-slider.js"></script>
  <script src="/src/js/battersea-multislider.js"></script>

  <script>
    console.log('üé† Battersea Sliders - Infinite Loop Demo');
    console.log('‚úÖ Slider and MultiSlider components loaded');
    
    // Log slider changes
    document.querySelectorAll('[data-slider]').forEach((slider, index) => {
      slider.addEventListener('battersea:slideChange', (e) => {
        console.log(`Slider ${index + 1} ‚Üí Slide ${e.detail.index + 1}`);
      });
    });
    
    // Log multislider changes
    document.querySelectorAll('[data-multislider]').forEach((slider, index) => {
      slider.addEventListener('battersea:multisliderChange', (e) => {
        console.log(`MultiSlider ${index + 1} ‚Üí Position ${e.detail.index}`);
      });
    });
  </script>
</body>
</html>
