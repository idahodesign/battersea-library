<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Battersea Header Component - Demo</title>
  <link rel="stylesheet" href="/src/css/battersea-library.css">
  <style>
    /* Demo page styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
    }
    
    /* Logo styles for demo */
    .logo-text {
      font-size: 24px;
      font-weight: bold;
      color: #4CAF50;
      padding: 15px 0;
      display: inline-block;
    }
    
    /* Pre-header content styles */
    .pre-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .pre-header-menu {
      display: flex;
      list-style: none;
      gap: 20px;
      margin: 0;
    }
    
    .pre-header-menu a {
      color: inherit;
      text-decoration: none;
      font-size: 13px;
    }
    
    .pre-header-menu a:hover {
      text-decoration: underline;
    }
    
    /* Placeholder nav styles */
    .nav-placeholder {
      display: flex;
      gap: 30px;
      list-style: none;
    }
    
    .nav-placeholder a {
      color: var(--battersea-header-text);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
    }
    
    .nav-placeholder a:hover {
      color: var(--battersea-primary);
    }
    
    /* Demo sections */
    .demo-section {
      padding: 100px 20px;
      min-height: 600px;
    }
    
    .demo-section:nth-child(even) {
      background: #f5f5f5;
    }
    
    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .demo-section h2 {
      font-size: 32px;
      margin-bottom: 20px;
      color: #333;
    }
    
    .demo-section p {
      font-size: 18px;
      line-height: 1.8;
      margin-bottom: 15px;
      color: #666;
    }
    
    .demo-controls {
      margin-top: 40px;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .demo-controls h3 {
      margin-bottom: 15px;
    }
    
    .demo-controls button {
      padding: 10px 20px;
      margin: 5px;
      background: var(--battersea-primary);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .demo-controls button:hover {
      opacity: 0.9;
    }
    
    .event-log {
      margin-top: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-left: 4px solid var(--battersea-primary);
      max-height: 200px;
      overflow-y: auto;
      font-family: monospace;
      font-size: 12px;
    }
    
    .event-log div {
      padding: 3px 0;
      color: #666;
    }
    
    .event-log div:first-child {
      color: #333;
      font-weight: bold;
    }
    
    .scroll-indicator {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--battersea-primary);
      color: white;
      padding: 15px 20px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 999;
    }
    
    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196F3;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    
    .info-box h4 {
      margin-bottom: 10px;
      color: #1976d2;
    }
    
    .info-box ul {
      margin-left: 20px;
    }
    
    .info-box li {
      margin: 5px 0;
    }
    
    /* Mobile adjustments */
    @media (max-width: 767px) {
      .pre-header-content {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .pre-header-menu {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .nav-placeholder {
        flex-direction: column;
        gap: 10px;
      }
      
      .demo-section {
        padding: 60px 15px;
      }
      
      .demo-section h2 {
        font-size: 24px;
      }
      
      .demo-section p {
        font-size: 16px;
      }
      
      .scroll-indicator {
        bottom: 15px;
        right: 15px;
        font-size: 12px;
        padding: 10px 15px;
      }
    }
  </style>
</head>
<body>

  <!-- Pre-Header Bar -->
  <div class="battersea-header-pre" 
       data-pre-mobile="show"
       data-pre-tablet="show" 
       data-pre-desktop="show"
       data-pre-height="40">
    <div class="pre-header-content">
      <span>ðŸ“ž Call us: (555) 123-4567</span>
      <ul class="pre-header-menu">
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#support">Support</a></li>
      </ul>
    </div>
  </div>

  <!-- Main Header -->
  <header class="battersea-header" 
          data-header
          data-sticky="true"
          data-shrink="true"
          data-shrink-offset="100"
          data-shrink-height="60"
          data-layout="right-align"
          data-transition-speed="0.3">
    
    <!-- Branding -->
    <div class="battersea-header__brand">
      <a href="#">
        <div class="logo-text battersea-header__logo">Battersea</div>
      </a>
    </div>
    
    <!-- Navigation Placeholder -->
    <nav class="battersea-header__nav">
      <ul class="nav-placeholder">
        <li><a href="#home">Home</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#demo">Demo</a></li>
        <li><a href="#docs">Docs</a></li>
      </ul>
    </nav>
    
  </header>

  <!-- Demo Content -->
  <section class="demo-section" id="home">
    <div class="demo-container">
      <h2>ðŸŽ‰ Battersea Header Component v2.2.0</h2>
      <p>Welcome to the adaptive header component demo! This header features:</p>
      
      <div class="info-box">
        <h4>âœ¨ Key Features</h4>
        <ul>
          <li><strong>Pre-Header Bar:</strong> Secondary content area that slides up on scroll (header adjusts position smoothly)</li>
          <li><strong>Sticky Header:</strong> Stays fixed at the top while scrolling (positions below pre-header initially)</li>
          <li><strong>Shrink Animation:</strong> Smoothly reduces height after scrolling 100px (desktop/tablet only)</li>
          <li><strong>Logo Scaling:</strong> Logo scales down proportionally when header shrinks</li>
          <li><strong>Mobile Optimized:</strong> No shrinking on mobile, maintains full height</li>
          <li><strong>Responsive Layout:</strong> Adapts to screen sizes automatically</li>
          <li><strong>Custom Events:</strong> Dispatches events for integration with other components</li>
        </ul>
      </div>
      
      <div class="demo-controls">
        <h3>ðŸŽ® Interactive Controls</h3>
        <button onclick="scrollToPosition(0)">Scroll to Top</button>
        <button onclick="scrollToPosition(500)">Scroll Down 500px</button>
        <button onclick="togglePreHeader()">Toggle Pre-Header</button>
        <button onclick="getHeaderHeight()">Get Header Height</button>
        <button onclick="clearEventLog()">Clear Event Log</button>
        
        <div class="event-log" id="eventLog">
          <div>ðŸ“‹ Event Log (watch header events as you scroll)</div>
        </div>
      </div>
    </div>
  </section>

  <section class="demo-section" id="features">
    <div class="demo-container">
      <h2>ðŸ”§ Configuration Options</h2>
      <p>The header component is highly configurable through data attributes:</p>
      
      <div class="info-box">
        <h4>Header Attributes</h4>
        <ul>
          <li><code>data-header</code> - Initialize the component (required)</li>
          <li><code>data-sticky="true"</code> - Enable sticky positioning</li>
          <li><code>data-shrink="true"</code> - Enable shrink on scroll</li>
          <li><code>data-shrink-offset="100"</code> - Pixels to scroll before shrinking (default: 100)</li>
          <li><code>data-shrink-height="60"</code> - Target height when shrunk (default: 60px)</li>
          <li><code>data-layout="right-align"</code> - Layout mode (right-align | center-stack)</li>
          <li><code>data-logo-mobile="path"</code> - Alternative logo for mobile devices</li>
          <li><code>data-transition-speed="0.3"</code> - Animation speed in seconds (default: 0.3)</li>
          <li><code>data-header-height="0"</code> - Manual height override (0 = auto)</li>
          <li><code>data-mobile-logo-height="0"</code> - Mobile logo height (0 = auto)</li>
        </ul>
      </div>
      
      <div class="info-box">
        <h4>Pre-Header Attributes</h4>
        <ul>
          <li><code>data-pre-mobile="show"</code> - Show/hide on mobile (show | hide)</li>
          <li><code>data-pre-tablet="show"</code> - Show/hide on tablet (show | hide)</li>
          <li><code>data-pre-desktop="show"</code> - Show/hide on desktop (show | hide)</li>
          <li><code>data-pre-height="40"</code> - Height in pixels (default: 40)</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="demo-section" id="demo">
    <div class="demo-container">
      <h2>ðŸŽ¬ How It Works</h2>
      <p>The header component uses several advanced techniques:</p>
      
      <div class="info-box">
        <h4>Technical Implementation</h4>
        <ul>
          <li><strong>Scroll Detection:</strong> Uses <code>requestAnimationFrame</code> for smooth, performant scroll tracking</li>
          <li><strong>Height Calculation:</strong> Automatically calculates header height from logo dimensions or uses manual override</li>
          <li><strong>Logo Swapping:</strong> Fade + scale transition when switching between desktop and mobile logos</li>
          <li><strong>Pre-Header Animation:</strong> CSS transform (translateY) for GPU-accelerated slide-up effect</li>
          <li><strong>Smart Positioning:</strong> Header initially positions below pre-header, smoothly transitions to top:0 when pre-header hides</li>
          <li><strong>Shrink Transition:</strong> Combined height + logo scale animations with configurable timing</li>
          <li><strong>Event Dispatching:</strong> Custom events notify other components (like SmoothScroll) of height changes</li>
        </ul>
      </div>
      
      <div class="info-box">
        <h4>ðŸŽ¯ Integration with SmoothScroll</h4>
        <p>The header automatically dispatches <code>battersea:headerResize</code> events. The SmoothScroll component can listen to these events and recalculate scroll offsets:</p>
        <ul>
          <li>Header shrinks â†’ SmoothScroll adjusts scroll targets</li>
          <li>Header expands â†’ SmoothScroll recalculates positions</li>
          <li>Real-time synchronization for pixel-perfect alignment</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="demo-section" id="docs">
    <div class="demo-container">
      <h2>ðŸ“š Custom Events</h2>
      <p>The header dispatches several custom events that you can listen to:</p>
      
      <div class="info-box">
        <h4>Available Events</h4>
        <ul>
          <li><code>battersea:headerSticky</code> - Header became sticky (on init if sticky=true)</li>
          <li><code>battersea:headerShrink</code> - Header shrunk on scroll</li>
          <li><code>battersea:headerExpand</code> - Header expanded (scroll back up)</li>
          <li><code>battersea:headerResize</code> - Header height changed (for scroll offset calculations)</li>
        </ul>
      </div>
      
      <div class="info-box">
        <h4>Example: Listen to Events</h4>
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto;">
const header = document.querySelector('[data-header]');

header.addEventListener('battersea:headerShrink', (e) => {
  console.log('Header shrunk to:', e.detail.height);
});

header.addEventListener('battersea:headerResize', (e) => {
  console.log('New height:', e.detail.height);
  console.log('Is shrunk:', e.detail.isShrunk);
  console.log('Is sticky:', e.detail.isSticky);
});
        </pre>
      </div>
    </div>
  </section>

  <section class="demo-section" id="usage">
    <div class="demo-container">
      <h2>ðŸ’» Usage Example</h2>
      
      <div class="info-box">
        <h4>Basic HTML Structure</h4>
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap;">
&lt;!-- Pre-Header (optional) --&gt;
&lt;div class="battersea-header-pre" 
     data-pre-height="40"&gt;
  &lt;!-- Your content --&gt;
&lt;/div&gt;

&lt;!-- Main Header --&gt;
&lt;header class="battersea-header" 
        data-header
        data-sticky="true"
        data-shrink="true"&gt;
  
  &lt;!-- Branding --&gt;
  &lt;div class="battersea-header__brand"&gt;
    &lt;a href="/"&gt;
      &lt;img src="logo.svg" class="battersea-header__logo" alt="Logo"&gt;
    &lt;/a&gt;
  &lt;/div&gt;
  
  &lt;!-- Navigation Placeholder --&gt;
  &lt;nav class="battersea-header__nav"&gt;
    &lt;!-- Future nav component will go here --&gt;
  &lt;/nav&gt;
  
&lt;/header&gt;
        </pre>
      </div>
      
      <div class="info-box">
        <h4>Required Scripts</h4>
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto;">
&lt;link rel="stylesheet" href="battersea-library.css"&gt;
&lt;script src="battersea-utils.js"&gt;&lt;/script&gt;
&lt;script src="battersea-core.js"&gt;&lt;/script&gt;
&lt;script src="battersea-header.js"&gt;&lt;/script&gt;
        </pre>
      </div>
    </div>
  </section>

  <section class="demo-section" id="next">
    <div class="demo-container">
      <h2>ðŸš€ What's Next?</h2>
      <p>The header component is now complete and ready for navigation components!</p>
      
      <div class="info-box">
        <h4>Coming Soon: Navigation Components</h4>
        <ul>
          <li><strong>HorizontalNav:</strong> Multi-level dropdown menus</li>
          <li><strong>VerticalNav:</strong> Slide-in drawer from left or right</li>
          <li><strong>OverlayNav:</strong> Full-screen menu with backdrop</li>
          <li><strong>MobileNav:</strong> Hamburger menu with animations</li>
        </ul>
        <p style="margin-top: 15px;">All navigation components will integrate seamlessly with this header structure!</p>
      </div>
      
      <p style="margin-top: 30px; font-size: 20px;">
        âœ… <strong>Header v2.2.0 Complete!</strong> Try scrolling to see the shrink animation in action.
      </p>
    </div>
  </section>

  <!-- Scroll Indicator -->
  <div class="scroll-indicator" id="scrollIndicator">
    Scroll: 0px
  </div>

  <!-- Scripts -->
  <script src="/src/js/battersea-utils.js"></script>
  <script src="/src/js/battersea-core.js"></script>
  <script src="/src/js/battersea-header.js"></script>
  
  <script>
    // Demo page scripts
    const eventLog = document.getElementById('eventLog');
    const scrollIndicator = document.getElementById('scrollIndicator');
    const header = document.querySelector('[data-header]');
    
    // Log header events
    function logEvent(message) {
      const div = document.createElement('div');
      div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      eventLog.appendChild(div);
      eventLog.scrollTop = eventLog.scrollHeight;
      
      // Keep only last 20 events
      while (eventLog.children.length > 21) {
        eventLog.removeChild(eventLog.children[1]);
      }
    }
    
    // Listen to header events
    header.addEventListener('battersea:headerSticky', (e) => {
      logEvent(`ðŸ”’ Header sticky - height: ${e.detail.height}px`);
    });
    
    header.addEventListener('battersea:headerShrink', (e) => {
      logEvent(`ðŸ“‰ Header shrunk - height: ${e.detail.shrunkHeight}px`);
    });
    
    header.addEventListener('battersea:headerExpand', (e) => {
      logEvent(`ðŸ“ˆ Header expanded - height: ${e.detail.height}px`);
    });
    
    header.addEventListener('battersea:headerResize', (e) => {
      logEvent(`ðŸ“ Height changed: ${e.detail.height}px (shrunk: ${e.detail.isShrunk})`);
    });
    
    // Update scroll indicator
    window.addEventListener('scroll', () => {
      const scrollY = Math.round(window.pageYOffset);
      scrollIndicator.textContent = `Scroll: ${scrollY}px`;
    });
    
    // Demo control functions
    function scrollToPosition(y) {
      window.scrollTo({ top: y, behavior: 'smooth' });
      logEvent(`â¬‡ï¸ Scrolling to ${y}px`);
    }
    
    function togglePreHeader() {
      const preHeader = document.querySelector('.battersea-header-pre');
      if (preHeader) {
        preHeader.classList.toggle('battersea-header-pre--hidden');
        logEvent('ðŸ”„ Pre-header toggled');
      }
    }
    
    function getHeaderHeight() {
      const height = header.offsetHeight;
      alert(`Current header height: ${height}px`);
      logEvent(`ðŸ“ Current height: ${height}px`);
    }
    
    function clearEventLog() {
      while (eventLog.children.length > 1) {
        eventLog.removeChild(eventLog.children[1]);
      }
      logEvent('ðŸ—‘ï¸ Event log cleared');
    }
    
    // Initial log
    setTimeout(() => {
      logEvent('âœ¨ Header component initialized');
    }, 100);
  </script>
</body>
</html>
