<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Header + SmoothScroll Integration Demo - Battersea Library</title>
  <link rel="stylesheet" href="src/css/battersea-library.css">
  <style>
    /* Demo page styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
    }
    
    /* Logo styles */
    .logo-text {
      font-size: 24px;
      font-weight: bold;
      color: #4CAF50;
      padding: 15px 0;
      display: inline-block;
    }
    
    /* Pre-header styles */
    .pre-header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .pre-header-menu {
      display: flex;
      list-style: none;
      gap: 20px;
      margin: 0;
    }
    
    .pre-header-menu a {
      color: inherit;
      text-decoration: none;
      font-size: 13px;
    }
    
    .pre-header-menu a:hover {
      text-decoration: underline;
    }
    
    /* Placeholder nav styles */
    .nav-placeholder {
      display: flex;
      gap: 30px;
      list-style: none;
    }
    
    .nav-placeholder a {
      color: var(--battersea-header-text);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
    }
    
    .nav-placeholder a:hover {
      color: var(--battersea-primary);
    }
    
    /* Section styles */
    .demo-section {
      min-height: 100vh;
      padding: 120px 20px 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .demo-section:nth-child(even) {
      background: #f5f5f5;
    }
    
    .demo-section:nth-child(1) {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .demo-section:nth-child(2) {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    
    .demo-section:nth-child(3) {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }
    
    .demo-section:nth-child(4) {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      color: white;
    }
    
    .demo-section:nth-child(5) {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      color: white;
    }
    
    .demo-section:nth-child(6) {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
      color: white;
    }
    
    .section-content {
      max-width: 900px;
      text-align: center;
    }
    
    .section-content h2 {
      font-size: 48px;
      margin-bottom: 20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .section-content p {
      font-size: 20px;
      line-height: 1.8;
      margin-bottom: 15px;
      opacity: 0.95;
    }
    
    .section-number {
      font-size: 120px;
      font-weight: bold;
      opacity: 0.2;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 0;
      pointer-events: none;
    }
    
    /* Info boxes */
    .info-box {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 25px;
      margin: 30px 0;
      border-radius: 12px;
      text-align: left;
    }
    
    .info-box h3 {
      margin-bottom: 15px;
      font-size: 24px;
    }
    
    .info-box ul {
      list-style: none;
      padding: 0;
    }
    
    .info-box li {
      padding: 8px 0;
      padding-left: 25px;
      position: relative;
    }
    
    .info-box li:before {
      content: "‚úì";
      position: absolute;
      left: 0;
      font-weight: bold;
      color: rgba(255, 255, 255, 0.9);
    }
    
    .info-box code {
      background: rgba(0, 0, 0, 0.2);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    
    /* Status indicator */
    .status-indicator {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      font-size: 13px;
      line-height: 1.6;
      z-index: 999;
      max-width: 300px;
      border-left: 4px solid var(--battersea-primary);
    }
    
    .status-indicator h4 {
      margin-bottom: 10px;
      color: var(--battersea-primary);
      font-size: 16px;
    }
    
    .status-item {
      display: flex;
      justify-content: space-between;
      padding: 4px 0;
    }
    
    .status-label {
      font-weight: 500;
      color: #666;
    }
    
    .status-value {
      font-weight: bold;
      color: #333;
    }
    
    .event-indicator {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(76, 175, 80, 0.95);
      color: white;
      padding: 20px 40px;
      border-radius: 8px;
      font-size: 18px;
      font-weight: bold;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      z-index: 10000;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    
    .event-indicator.show {
      opacity: 1;
    }
    
    /* Scroll hint */
    .scroll-hint {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      animation: bounce 2s infinite;
      opacity: 0.8;
    }
    
    .scroll-hint span {
      display: block;
      width: 30px;
      height: 50px;
      border: 2px solid white;
      border-radius: 25px;
      position: relative;
    }
    
    .scroll-hint span:before {
      content: '';
      position: absolute;
      top: 10px;
      left: 50%;
      width: 6px;
      height: 6px;
      margin-left: -3px;
      background: white;
      border-radius: 50%;
      animation: scroll 2s infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
      40% { transform: translateX(-50%) translateY(-10px); }
      60% { transform: translateX(-50%) translateY(-5px); }
    }
    
    @keyframes scroll {
      0% { opacity: 1; top: 10px; }
      100% { opacity: 0; top: 30px; }
    }
    
    /* Mobile adjustments */
    @media (max-width: 767px) {
      .pre-header-content {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .pre-header-menu {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .nav-placeholder {
        display: none;
      }
      
      .section-content h2 {
        font-size: 32px;
      }
      
      .section-content p {
        font-size: 16px;
      }
      
      .section-number {
        font-size: 80px;
      }
      
      .status-indicator {
        bottom: 10px;
        left: 10px;
        right: 10px;
        max-width: none;
      }
      
      .demo-section {
        padding: 100px 15px 60px;
      }
    }
  </style>
</head>
<body>

  <!-- Pre-Header Bar -->
  <div class="battersea-header-pre" 
       data-pre-mobile="show"
       data-pre-tablet="show" 
       data-pre-desktop="show"
       data-pre-height="40">
    <div class="pre-header-content">
      <span>üéØ Header + SmoothScroll Integration Demo</span>
      <ul class="pre-header-menu">
        <li><a href="#section1">Section 1</a></li>
        <li><a href="#section2">Section 2</a></li>
        <li><a href="#section3">Section 3</a></li>
      </ul>
    </div>
  </div>

  <!-- Adaptive Header -->
  <header class="battersea-header" 
          data-header
          data-sticky="true"
          data-shrink="true"
          data-shrink-offset="100"
          data-shrink-height="60"
          data-layout="right-align"
          data-transition-speed="0.3"
          id="main-header">
    
    <!-- Branding -->
    <div class="battersea-header__brand">
      <a href="#">
        <div class="logo-text battersea-header__logo">Battersea</div>
      </a>
    </div>
    
    <!-- Navigation Placeholder -->
    <nav class="battersea-header__nav">
      <ul class="nav-placeholder">
        <li><a href="#section1">Intro</a></li>
        <li><a href="#section3">Features</a></li>
        <li><a href="#section5">Events</a></li>
        <li><a href="#section6">Demo</a></li>
      </ul>
    </nav>
    
  </header>

  <!-- SmoothScroll Navigation (dots on right side) -->
  <div data-smoothscroll 
       data-smoothscroll-header-selector="#main-header"
       data-smoothscroll-position="right"
       data-smoothscroll-duration="800"
       data-smoothscroll-easing="ease-out"
       data-smoothscroll-hide-mobile="true">
  </div>

  <!-- Section 1: Introduction -->
  <section class="demo-section" data-scroll-section data-scroll-title="Introduction" id="section1">
    <div class="section-number">01</div>
    <div class="section-content">
      <h2>üéâ Perfect Integration!</h2>
      <p>The Header and SmoothScroll components work together seamlessly.</p>
      <p>Notice how the scroll navigation dots (‚Üí) automatically adjust for the header height.</p>
      
      <div class="info-box">
        <h3>What You're Seeing:</h3>
        <ul>
          <li>Pre-header bar at the very top</li>
          <li>Sticky header positioned below it</li>
          <li>SmoothScroll dots on the right side</li>
          <li>Perfect scroll alignment to sections</li>
        </ul>
      </div>
      
      <div class="scroll-hint">
        <span></span>
      </div>
    </div>
  </section>

  <!-- Section 2: Dynamic Offset -->
  <section class="demo-section" data-scroll-section data-scroll-title="Dynamic Offset" id="section2">
    <div class="section-number">02</div>
    <div class="section-content">
      <h2>üìè Dynamic Offset Calculation</h2>
      <p>SmoothScroll reads the header height in real-time using <code>getComputedStyle()</code>.</p>
      
      <div class="info-box">
        <h3>How It Works:</h3>
        <ul>
          <li>SmoothScroll detects header via <code>data-smoothscroll-header-selector</code></li>
          <li>Calculates header height dynamically (even during transitions)</li>
          <li>Adjusts scroll targets to land perfectly below header</li>
          <li>Updates when header shrinks or expands</li>
        </ul>
      </div>
      
      <p style="margin-top: 30px;">Try scrolling slowly and watch the header shrink at 100px!</p>
    </div>
  </section>

  <!-- Section 3: Header Events -->
  <section class="demo-section" data-scroll-section data-scroll-title="Header Events" id="section3">
    <div class="section-number">03</div>
    <div class="section-content">
      <h2>üì° Event System</h2>
      <p>The header dispatches events that SmoothScroll can listen to:</p>
      
      <div class="info-box">
        <h3>Available Events:</h3>
        <ul>
          <li><code>battersea:headerSticky</code> - Header became sticky</li>
          <li><code>battersea:headerShrink</code> - Header shrunk on scroll</li>
          <li><code>battersea:headerExpand</code> - Header expanded</li>
          <li><code>battersea:headerResize</code> - Height changed</li>
        </ul>
      </div>
      
      <p>Check the status indicator (bottom left) to see live header state!</p>
    </div>
  </section>

  <!-- Section 4: Smooth Scrolling -->
  <section class="demo-section" data-scroll-section data-scroll-title="Smooth Scrolling" id="section4">
    <div class="section-number">04</div>
    <div class="section-content">
      <h2>üéØ Pixel-Perfect Alignment</h2>
      <p>Click any dot on the right to scroll to that section.</p>
      
      <div class="info-box">
        <h3>Features You'll Notice:</h3>
        <ul>
          <li>Smooth cubic easing for natural deceleration</li>
          <li>Sections align perfectly below header</li>
          <li>Active dot updates as you scroll naturally</li>
          <li>Tooltips show section titles on hover</li>
          <li>Works even while header is shrinking!</li>
        </ul>
      </div>
      
      <p>The scroll calculation happens in <code>requestAnimationFrame</code> - buttery smooth! üßà</p>
    </div>
  </section>

  <!-- Section 5: Pre-Header Coordination -->
  <section class="demo-section" data-scroll-section data-scroll-title="Pre-Header Magic" id="section5">
    <div class="section-number">05</div>
    <div class="section-content">
      <h2>‚ú® Pre-Header Coordination</h2>
      <p>Scroll back to the top to see the pre-header in action!</p>
      
      <div class="info-box">
        <h3>The Dance:</h3>
        <ul>
          <li>At top: Header sits below pre-header (top: 40px)</li>
          <li>Scroll down 10px: Pre-header slides up, header moves to top: 0</li>
          <li>Scroll back up: Both smoothly return to original positions</li>
          <li>All transitions synchronized perfectly</li>
        </ul>
      </div>
      
      <p>No overlaps, no jumps, no flicker - just smooth transitions! üé¨</p>
    </div>
  </section>

  <!-- Section 6: Try It Out -->
  <section class="demo-section" data-scroll-section data-scroll-title="Interactive Demo" id="section6">
    <div class="section-number">06</div>
    <div class="section-content">
      <h2>üéÆ Try It Yourself!</h2>
      <p>Interact with the demo to see everything in action:</p>
      
      <div class="info-box">
        <h3>Things to Try:</h3>
        <ul>
          <li>Click the dots on the right to jump to sections</li>
          <li>Scroll slowly to see the header shrink at 100px</li>
          <li>Scroll back to top to see pre-header return</li>
          <li>Hover over dots to see section titles</li>
          <li>Watch the status indicator (bottom left) for live updates</li>
          <li>Try on mobile to see responsive behavior</li>
        </ul>
      </div>
      
      <div class="info-box">
        <h3>Integration Code:</h3>
        <code style="display: block; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; line-height: 1.8; white-space: pre-wrap;">
&lt;!-- Header --&gt;
&lt;header data-header 
        data-sticky="true" 
        data-shrink="true"
        id="main-header"&gt;
  ...
&lt;/header&gt;

&lt;!-- SmoothScroll --&gt;
&lt;div data-smoothscroll 
     data-smoothscroll-header-selector="#main-header"&gt;
&lt;/div&gt;
        </code>
      </div>
      
      <p style="margin-top: 30px; font-size: 24px; font-weight: bold;">
        That's it! Just two components, perfectly integrated. üöÄ
      </p>
    </div>
  </section>

  <!-- Status Indicator -->
  <div class="status-indicator" id="statusIndicator">
    <h4>üìä Live Status</h4>
    <div class="status-item">
      <span class="status-label">Scroll Position:</span>
      <span class="status-value" id="scrollPos">0px</span>
    </div>
    <div class="status-item">
      <span class="status-label">Header Height:</span>
      <span class="status-value" id="headerHeight">--</span>
    </div>
    <div class="status-item">
      <span class="status-label">Header State:</span>
      <span class="status-value" id="headerState">Normal</span>
    </div>
    <div class="status-item">
      <span class="status-label">Active Section:</span>
      <span class="status-value" id="activeSection">--</span>
    </div>
  </div>

  <!-- Event Indicator -->
  <div class="event-indicator" id="eventIndicator"></div>

  <!-- Scripts -->
  <script src="/src/js/battersea-utils.js"></script>
  <script src="/src/js/battersea-core.js"></script>
  <script src="/src/js/battersea-tooltip.js"></script>
  <script src="/src/js/battersea-header.js"></script>
  <script src="/src/js/battersea-smoothscroll.js"></script>
  
  <script>
    // Demo page interaction scripts
    const header = document.querySelector('[data-header]');
    const scrollPosEl = document.getElementById('scrollPos');
    const headerHeightEl = document.getElementById('headerHeight');
    const headerStateEl = document.getElementById('headerState');
    const activeSectionEl = document.getElementById('activeSection');
    const eventIndicator = document.getElementById('eventIndicator');
    
    let eventTimeout;
    
    // Show event notification
    function showEvent(message) {
      eventIndicator.textContent = message;
      eventIndicator.classList.add('show');
      
      clearTimeout(eventTimeout);
      eventTimeout = setTimeout(() => {
        eventIndicator.classList.remove('show');
      }, 2000);
    }
    
    // Update status display
    function updateStatus() {
      const scrollY = Math.round(window.pageYOffset);
      scrollPosEl.textContent = scrollY + 'px';
      
      if (header) {
        const height = header.offsetHeight;
        headerHeightEl.textContent = height + 'px';
      }
    }
    
    // Listen to header events
    if (header) {
      header.addEventListener('battersea:headerSticky', (e) => {
        showEvent('üîí Header Sticky');
        updateStatus();
      });
      
      header.addEventListener('battersea:headerShrink', (e) => {
        headerStateEl.textContent = 'Shrunk';
        showEvent('üìâ Header Shrunk');
        updateStatus();
      });
      
      header.addEventListener('battersea:headerExpand', (e) => {
        headerStateEl.textContent = 'Normal';
        showEvent('üìà Header Expanded');
        updateStatus();
      });
      
      header.addEventListener('battersea:headerResize', (e) => {
        updateStatus();
      });
    }
    
    // Listen to scroll section changes
    const smoothScroll = document.querySelector('[data-smoothscroll]');
    if (smoothScroll) {
      smoothScroll.addEventListener('battersea:scrollSectionChange', (e) => {
        activeSectionEl.textContent = e.detail.section.title;
      });
    }
    
    // Update scroll position
    window.addEventListener('scroll', () => {
      updateStatus();
    });
    
    // Initial update
    setTimeout(() => {
      updateStatus();
      showEvent('‚ú® Integration Demo Ready!');
    }, 500);
  </script>
</body>
</html>
